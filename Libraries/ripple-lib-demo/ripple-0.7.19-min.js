var ripple=function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return t[i].call(null,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.e=function(t,r){r.call(null,e)},e.modules=t,e.cache=r,e(0)}({c:"",0:function(t,e,r){e.Remote=r(1).Remote,e.Amount=r(2).Amount,e.Currency=r(3).Currency,e.Base=r(4).Base,e.UInt160=r(2).UInt160,e.Seed=r(2).Seed,e.Transaction=r(5).Transaction,e.Meta=r(6).Meta,e.SerializedObject=r(7).SerializedObject,e.binformat=r(8),e.utils=r(9),e.sjcl=r(10),e.config=r(11)},1:function(t,e,r){function i(t,e){s.call(this),this.remote=t,this.requested=!1,this.message={command:e,id:void 0}}function n(t,e){s.call(this);var r=this;this.trusted=t.trusted,this.local_sequence=t.local_sequence,this.local_fee=t.local_fee,this.local_signing="undefined"==typeof t.local_signing?!0:t.local_signing,this.fee_cushion="undefined"==typeof t.fee_cushion?1.5:t.fee_cushion,this.id=0,this.trace=t.trace||e,this._server_fatal=!1,this._ledger_current_index=void 0,this._ledger_hash=void 0,this._ledger_time=void 0,this._stand_alone=void 0,this._testnet=void 0,this._transaction_subs=0,this.online_target=!1,this._online_state="closed",this.state="offline",this.retry_timer=void 0,this.retry=void 0,this._load_base=256,this._load_factor=256,this._fee_ref=10,this._fee_base=10,this._reserve_base=void 0,this._reserve_inc=void 0,this._connection_count=0,this._connected=!1,this._last_tx=null,this._cur_path_find=null,this.local_signing&&(this.local_sequence=!0,this.local_fee=!0),this._servers=[],this._primary_server=void 0,this.accounts={},this._accounts={},this._books={},this.secrets={},this.ledgers={current:{account_root:{}}},t.hasOwnProperty("servers")||(t.servers=[{host:t.websocket_ip,port:t.websocket_port,secure:t.websocket_ssl,trusted:t.trusted}]),t.servers.forEach(function(t){for(var e=Number(t.pool)||1;e--;)r.add_server(t)});var i=t.maxListeners||0;this._servers.concat(this).forEach(function(t){t.setMaxListeners(i)}),this.on("newListener",function(t){"transaction_all"===t&&(!r._transaction_subs&&r._connected&&r.request_subscribe("transactions").request(),r._transaction_subs+=1)}),this.on("removeListener",function(t){"transaction_all"===t&&(r._transaction_subs-=1,!r._transaction_subs&&r._connected&&r.request_unsubscribe("transactions").request())})}var s=r(23).EventEmitter,o=r(24),a=r(13).Server,c=r(2).Amount,u=r(3).Currency,h=r(14).UInt160,f=r(5).Transaction,_=r(15).Account,l=r(6).Meta,p=r(16).OrderBook,d=r(17).PathFind,v=r(9),m=r(11),y=r(10);o.inherits(i,s),i.prototype.request=function(t){this.requested||(this.requested=!0,this.remote.request(this),this.emit("request",t))},i.prototype.callback=function(t,e,r){return t&&"function"==typeof t&&(this.once(e||"success",t.bind(this,null)),this.once(r||"error",t.bind(this)),this.request()),this},i.prototype.timeout=function(t,e){if(!this.requested)return this.once("request",this.timeout.bind(this,t,e)),void 0;var r=this,i=this.emit,n=!1,s=setTimeout(function(){n=!0,"function"==typeof e&&e(),i.call(r,"timeout")},t);return this.emit=function(){n||(clearTimeout(s),i.apply(r,arguments))},this},i.prototype.build_path=function(t){return t&&(this.message.build_path=!0),this},i.prototype.ledger_choose=function(t){return t?this.message.ledger_index=this.remote._ledger_current_index:this.message.ledger_hash=this.remote._ledger_hash,this},i.prototype.ledger_hash=function(t){return this.message.ledger_hash=t,this},i.prototype.ledger_index=function(t){return this.message.ledger_index=t,this},i.prototype.ledger_select=function(t){switch(t){case"current":case"closed":case"verified":this.message.ledger_index=t;break;default:String(t).length>12?this.message.ledger_hash=t:this.message.ledger_index=t}return this},i.prototype.account_root=function(t){return this.message.account_root=h.json_rewrite(t),this},i.prototype.index=function(t){return this.message.index=t,this},i.prototype.offer_id=function(t,e){return this.message.offer={account:h.json_rewrite(t),seq:e},this},i.prototype.offer_index=function(t){return this.message.offer=t,this},i.prototype.secret=function(t){return t&&(this.message.secret=t),this},i.prototype.tx_hash=function(t){return this.message.tx_hash=t,this},i.prototype.tx_json=function(t){return this.message.tx_json=t,this},i.prototype.tx_blob=function(t){return this.message.tx_blob=t,this},i.prototype.ripple_state=function(t,e,r){return this.message.ripple_state={accounts:[h.json_rewrite(t),h.json_rewrite(e)],currency:r},this},i.prototype.accounts=function(t,e){Array.isArray(t)||(t=[t]);var r=t.map(function(t){return h.json_rewrite(t)});return e?this.message.rt_accounts=r:this.message.accounts=r,this},i.prototype.rt_accounts=function(t){return this.accounts(t,!0)},i.prototype.books=function(t,e){function r(t){if(!o[t])throw new Error("Missing "+t);var e=a[t]={currency:u.json_rewrite(o[t].currency)};"XRP"!==e.currency&&(e.issuer=h.json_rewrite(o[t].issuer))}for(var i=[],n=0,s=t.length;s>n;n++){var o=t[n],a={};r("taker_gets"),r("taker_pays"),e&&(a.snapshot=!0),o.both&&(a.both=!0),i.push(a)}return this.message.books=i,this},o.inherits(n,s),n.flags={account_root:{PasswordSpent:65536,RequireDestTag:131072,RequireAuth:262144,DisallowXRP:524288}},n.from_config=function(t,e){var r="string"==typeof t?m.servers[t]:t,i=new n(r,e);for(var s in m.accounts){var o=m.accounts[s];"object"==typeof o&&o.secret&&(i.set_secret(s,o.secret),i.set_secret(o.account,o.secret))}return i},n.create_remote=function(t,e){var r=n.from_config(t);return r.connect(e),r},n.prototype.add_server=function(t){var e=this,r=(t.secure||t.websocket_ssl?"wss://":"ws://")+(t.host||t.websocket_ip)+":"+(t.port||t.websocket_port),i=new a(this,{url:r});return i.on("message",function(t){e._handle_message(t)}),i.on("connect",function(){(t.primary||!e._primary_server)&&e._set_primary_server(i),e._connection_count++,e._set_state("online")}),i.on("disconnect",function(){e._connection_count--,e._connection_count||e._set_state("offline")}),this._servers.push(i),this},n.prototype.server_fatal=function(){this._server_fatal=!0},n.prototype._set_state=function(t){if(this.trace&&console.log("remote: set_state: %s",t),this.state!==t)switch(this.state=t,this.emit("state",t),t){case"online":this._online_state="open",this._connected=!0,this.emit("connect"),this.emit("connected");break;case"offline":this._online_state="closed",this._connected=!1,this.emit("disconnect"),this.emit("disconnected")}},n.prototype.set_trace=function(t){return this.trace=void 0===t||t,this},n.prototype.connect=function(t){switch(typeof t){case"undefined":break;case"function":this.once("connect",t);break;default:if(!Boolean(t))return this.disconnect()}if(!this._servers.length)throw new Error("No servers available.");for(var e=0;e<this._servers.length;e++)this._servers[e].connect();return this},n.prototype.disconnect=function(){for(var t=0,e=this._servers.length;e>t;t++)this._servers[t].disconnect();return this._set_state("offline"),this},n.prototype.ledger_hash=function(){return this._ledger_hash},n.prototype._handle_message=function(t){var e,r=this,i=JSON.parse(t),n=!1;if("object"!=typeof i)n=!0;else switch(i.type){case"response":break;case"ledgerClosed":this._ledger_time=i.ledger_time,this._ledger_hash=i.ledger_hash,this._ledger_current_index=i.ledger_index+1,this.emit("ledger_closed",i);break;case"transaction":if(this._last_tx===i.transaction.hash)break;this._last_tx=i.transaction.hash,this.trace&&v.logObject("remote: tx: %s",i),i.mmeta=new l(i.meta);for(var s=i.mmeta.getAffectedAccounts(),o=0,a=s.length;a>o;o++){var c=r._accounts[s[o]];c&&c.notifyTx(i)}for(s=i.mmeta.getAffectedBooks(),o=0,a=s.length;a>o;o++){var u=r._books[s[o]];u&&u.notifyTx(i)}this.emit("transaction",i),this.emit("transaction_all",i);break;case"path_find":this._cur_path_find&&this._cur_path_find.notify_update(i),this.emit("path_find_all",i);break;case"serverStatus":"load_base"in i&&"load_factor"in i&&(i.load_base!==r._load_base||i.load_factor!=r._load_factor)&&(r._load_base=i.load_base,r._load_factor=i.load_factor,r.emit("load",{load_base:r._load_base,load_factor:r.load_factor}));break;default:this.trace&&v.logObject("remote: "+i.type+": %s",i),this.emit("net_"+i.type,i)}n&&(console.log("unexpected message from trusted remote: %s",t),(e||this).emit("error",{error:"remoteUnexpected",error_message:"Unexpected response from remote."}))},n.prototype._set_primary_server=function(t){this._primary_server&&(this._primary_server._primary=!1),this._primary_server=t,this._primary_server._primary=!0},n.prototype._server_is_available=function(t){return t&&t._connected},n.prototype._next_server=function(){for(var t=null,e=0;e<this._servers.length;e++){var r=this._servers[e];if(this._server_is_available(r)){t=r;break}}return t},n.prototype._get_server=function(){var t;return this._server_is_available(this._primary_server)?t=this._primary_server:(t=this._next_server(),t&&this._set_primary_server(t)),t},n.prototype.request=function(t){if(this._servers.length)if(this._connected){var e=this._get_server();e?e.request(t):t.emit("error",new Error("No servers available"))}else this.once("connect",this.request.bind(this,t));else t.emit("error",new Error("No servers available"))},n.prototype.request_server_info=function(t){return new i(this,"server_info").callback(t)},n.prototype.request_ledger=function(t,e,r){var n=new i(this,"ledger");switch(t&&(console.log("request_ledger: ledger parameter is deprecated"),n.message.ledger=t),typeof e){case"object":e.full&&(n.message.full=!0),e.expand&&(n.message.expand=!0),e.transactions&&(n.message.transactions=!0),e.accounts&&(n.message.accounts=!0);break;case"function":r=e,e=void 0;break;default:console.log("request_ledger: full parameter is deprecated"),n.message.full=!0}return n.callback(r),n},n.prototype.request_ledger_hash=function(t){return new i(this,"ledger_closed").callback(t)},n.prototype.request_ledger_header=function(t){return new i(this,"ledger_header").callback(t)},n.prototype.request_ledger_current=function(t){return new i(this,"ledger_current").callback(t)},n.prototype.request_ledger_entry=function(t,e){var r=this,n=new i(this,"ledger_entry");return"account_root"===t&&(n.request_default=n.request,n.request=function(){var e=!0;if(r._ledger_hash);else if("account_root"===t){var i=r.ledgers.current.account_root;i||(i=r.ledgers.current.account_root={});var s=r.ledgers.current.account_root[n.message.account_root];if(s)n.emit("success",{node:s}),e=!1;else switch(t){case"account_root":n.on("success",function(t){r.ledgers.current.account_root[t.node.Account]=t.node})}}e&&n.request_default()}),n.callback(e),n},n.prototype.request_subscribe=function(t,e){var r=new i(this,"subscribe");return t&&(r.message.streams=Array.isArray(t)?t:[t]),r.callback(e),r},n.prototype.request_unsubscribe=function(t,e){var r=new i(this,"unsubscribe");return t&&(r.message.streams=Array.isArray(t)?t:[t]),r.callback(e),r},n.prototype.request_transaction_entry=function(t,e){return new i(this,"transaction_entry").tx_hash(t).callback(e)},n.prototype.request_tx=function(t,e){var r=new i(this,"tx");return r.message.transaction=t,r.callback(e),r},n.prototype.request_account_info=function(t,e){var r=new i(this,"account_info");return r.message.ident=h.json_rewrite(t),r.message.account=h.json_rewrite(t),r.callback(e),r},n.prototype.request_account_lines=function(t,e,r,n){var s=new i(this,"account_lines");return s.message.account=h.json_rewrite(t),e&&(s.message.index=e),s.ledger_choose(r),s.callback(n),s},n.prototype.request_account_offers=function(t,e,r,n){var s=new i(this,"account_offers");return s.message.account=h.json_rewrite(t),e&&(s.message.index=e),s.ledger_choose(r),s.callback(n),s},n.prototype.request_account_tx=function(t,e){var r=new i(this,"account_tx");return r.message.account=t.account,"undefined"!=typeof t.ledger_index_min&&(r.message.ledger_index_min=t.ledger_index_min),"undefined"!=typeof t.ledger_index_max&&(r.message.ledger_index_max=t.ledger_index_max),"undefined"!=typeof t.binary&&(r.message.binary=t.binary),"undefined"!=typeof t.count&&(r.message.count=t.count),"undefined"!=typeof t.descending&&(r.message.descending=t.descending),"undefined"!=typeof t.offset&&(r.message.offset=t.offset),"undefined"!=typeof t.limit&&(r.message.limit=t.limit),r.callback(e),r},n.prototype.request_book_offers=function(t,e,r,n){var s=new i(this,"book_offers");return s.message.taker_gets={currency:u.json_rewrite(t.currency)},"XRP"!==s.message.taker_gets.currency&&(s.message.taker_gets.issuer=h.json_rewrite(t.issuer)),s.message.taker_pays={currency:u.json_rewrite(e.currency)},"XRP"!==s.message.taker_pays.currency&&(s.message.taker_pays.issuer=h.json_rewrite(e.issuer)),s.message.taker=r?r:h.ACCOUNT_ONE,s.callback(n),s},n.prototype.request_wallet_accounts=function(t,e){v.assert(this.trusted);var r=new i(this,"wallet_accounts");return r.message.seed=t,r.callback(e)},n.prototype.request_sign=function(t,e,r){v.assert(this.trusted);var n=new i(this,"sign");return n.message.secret=t,n.message.tx_json=e,n.callback(r),n},n.prototype.request_submit=function(t){var e=new i(this,"submit");return e.callback(t),e},n.prototype._server_prepare_subscribe=function(t){var e=this,r=["ledger","server"];this._transaction_subs&&r.push("transactions");var i=this.request_subscribe(r);return i.on("success",function(t){if(e._stand_alone=!!t.stand_alone,e._testnet=!!t.testnet,"string"==typeof t.random){for(var r=t.random.match(/[0-9A-F]{8}/gi);r&&r.length;)y.random.addEntropy(parseInt(r.pop(),16));e.emit("random",v.hexToArray(t.random))}t.ledger_hash&&t.ledger_index&&(e._ledger_time=t.ledger_time,e._ledger_hash=t.ledger_hash,e._ledger_current_index=t.ledger_index+1,e.emit("ledger_closed",t)),e._load_base=t.load_base||256,e._load_factor=t.load_factor||1,e._fee_ref=t.fee_ref,e._fee_base=t.fee_base,e._reserve_base=t.reserve_base,e._reserve_inc=t.reserve_inc,e.emit("subscribed")}),e.emit("prepare_subscribe",i),i.callback(t),i},n.prototype.ledger_accept=function(t){if(this._stand_alone){var e=new i(this,"ledger_accept");e.request(),e.callback(t)}else this.emit("error",{error:"notStandAlone"});return this},n.prototype.request_account_balance=function(t,e,r){var i=this.request_ledger_entry("account_root");return i.account_root(t).ledger_choose(e).on("success",function(t){i.emit("account_balance",c.from_json(t.node.Balance))}),i.callback(r,"account_balance"),i},n.prototype.request_account_flags=function(t,e,r){var i=this.request_ledger_entry("account_root");return i.account_root(t).ledger_choose(e).on("success",function(t){i.emit("account_flags",t.node.Flags)}),i.callback(r,"account_flags"),i},n.prototype.request_owner_count=function(t,e,r){var i=this.request_ledger_entry("account_root");return i.account_root(t).ledger_choose(e).on("success",function(t){i.emit("owner_count",t.node.OwnerCount)}),i.callback(r,"owner_count"),i},n.prototype.account=function(t){var t=h.json_rewrite(t);if(!this._accounts[t]){var e=new _(this,t);if(!e.is_valid())return e;this._accounts[t]=e}var e=this._accounts[t];return e},n.prototype.path_find=function(t,e,r,i){var n=new d(this,t,e,r,i);return this._cur_path_find&&this._cur_path_find.notify_superceded(),n.create(),this._cur_path_find=n,n},n.prototype.book=function(t,e,r,i){var n=t;"XRP"!==n&&(n+="/"+e);var s=r;"XRP"!==s&&(s+="/"+i);var o=n+":"+s;if(!this._books[o]){var a=new p(this,t,e,r,i);if(!a.is_valid())return a;this._books[o]=a}return this._books[o]},n.prototype.account_seq=function(t,e){var r,t=h.json_rewrite(t),i=this.accounts[t];return i&&i.seq&&(r=i.seq,"ADVANCE"===e&&(i.seq+=1),"REWIND"===e&&(i.seq-=1)),r},n.prototype.set_account_seq=function(t,e){var t=h.json_rewrite(t);this.accounts[t]||(this.accounts[t]={}),this.accounts[t].seq=e},n.prototype.account_seq_cache=function(t,e,r){var i=this;i.accounts[t]||(i.accounts[t]={});var n=i.accounts[t],s=n.caching_seq_request;return s||(s=i.request_ledger_entry("account_root").account_root(t).ledger_choose(e).on("success",function(t){delete n.caching_seq_request;var e=t.node.Sequence;n.seq=e,s.emit("success_account_seq_cache",t)}).on("error",function(t){delete n.caching_seq_request,s.emit("error_account_seq_cache",t)}),n.caching_seq_request=s),s.callback(r,"success_account_seq_cache","error_account_seq_cache"),s},n.prototype.dirty_account_root=function(t){var t=h.json_rewrite(t);delete this.ledgers.current.account_root[t]},n.prototype.set_secret=function(t,e){this.secrets[t]=e},n.prototype.request_ripple_balance=function(t,e,r,i,n){var s=this.request_ledger_entry("ripple_state");return s.ripple_state(t,e,r).ledger_choose(i).on("success",function(r){var i=r.node,n=c.from_json(i.LowLimit),o=c.from_json(i.HighLimit),a=c.from_json(i.Balance),u=h.from_json(t).equals(o.issuer());s.emit("ripple_state",{account_balance:(u?a.negate():a.clone()).parse_issuer(t),peer_balance:(u?a.clone():a.negate()).parse_issuer(e),account_limit:(u?o:n).clone().parse_issuer(e),peer_limit:(u?n:o).clone().parse_issuer(t),account_quality_in:u?i.HighQualityIn:i.LowQualityIn,peer_quality_in:u?i.LowQualityIn:i.HighQualityIn,account_quality_out:u?i.HighQualityOut:i.LowQualityOut,peer_quality_out:u?i.LowQualityOut:i.HighQualityOut})}).callback(n,"ripple_state")},n.prototype.request_ripple_path_find=function(t,e,r,n,s){var o=new i(this,"ripple_path_find");return o.message.source_account=h.json_rewrite(t),o.message.destination_account=h.json_rewrite(e),o.message.destination_amount=c.json_rewrite(r),n&&(o.message.source_currencies=n.map(function(t){var e={};return"issuer"in t&&(e.issuer=h.json_rewrite(t.issuer)),"currency"in t&&(e.currency=u.json_rewrite(t.currency)),e})),o.callback(s),o},n.prototype.request_path_find_create=function(t,e,r,n,s){var o=new i(this,"path_find");return o.message.subcommand="create",o.message.source_account=h.json_rewrite(t),o.message.destination_account=h.json_rewrite(e),o.message.destination_amount=c.json_rewrite(r),n&&(o.message.source_currencies=n.map(function(t){var e={};return"issuer"in t&&(e.issuer=h.json_rewrite(t.issuer)),"currency"in t&&(e.currency=u.json_rewrite(t.currency)),e})),o.callback(s),o},n.prototype.request_path_find_close=function(){var t=new i(this,"path_find");return t.message.subcommand="close",t},n.prototype.request_unl_list=function(t){var e=new i(this,"unl_list");return e.callback(t),e},n.prototype.request_unl_add=function(t,e,r){var n=new i(this,"unl_add");return n.message.node=t,e&&(n.message.comment=note),n.callback(r),n},n.prototype.request_unl_delete=function(t,e){var r=new i(this,"unl_delete");return r.message.node=t,r.callback(e),r},n.prototype.request_peers=function(t){var e=new i(this,"peers");return e.callback(t),e},n.prototype.request_connect=function(t,e,r){var n=new i(this,"connect");return n.message.ip=t,e&&(n.message.port=e),n.callback(r),n},n.prototype.transaction=function(){return new f(this)},n.prototype.fee_tx=function(t){var e=this.fee_tx_unit();return c.from_json(""+Math.ceil(t*e))},n.prototype.fee_tx_unit=function(){var t=this._fee_base/this._fee_ref;return t*=this._load_factor/this._load_base,t*=this.fee_cushion},n.prototype.reserve=function(t){var e=c.from_json(""+this._reserve_base),r=c.from_json(""+this._reserve_inc);if(t=t||0,0>t)throw new Error("Owner count must not be negative.");return e.add(r.product_human(t))},e.Remote=n},2:function(t,e,r){var i=r(10);i.bn;var n=r(9),s=r(18),o=s.BigInteger,a=r(14).UInt160,c=r(19).Seed,u=r(3).Currency,h=e.consts={currency_xns:0,currency_one:1,xns_precision:6,bi_5:new o("5"),bi_7:new o("7"),bi_10:new o("10"),bi_1e14:new o(String(1e14)),bi_1e16:new o(String(1e16)),bi_1e17:new o(String(1e17)),bi_1e32:new o("100000000000000000000000000000000"),bi_man_max_value:new o("9999999999999999"),bi_man_min_value:new o("1000000000000000"),bi_xns_max:new o("9000000000000000000"),bi_xns_min:new o("-9000000000000000000"),bi_xns_unit:new o("1000000"),cMinOffset:-96,cMaxOffset:80},f=function(){this._value=new o,this._offset=0,this._is_native=!0,this._is_negative=!1,this._currency=new u,this._issuer=new a};f.text_full_rewrite=function(t){return f.from_json(t).to_text_full()},f.json_rewrite=function(t){return f.from_json(t).to_json()},f.from_number=function(t){return(new f).parse_number(t)},f.from_json=function(t){return(new f).parse_json(t)},f.from_quality=function(t,e,r){return(new f).parse_quality(t,e,r)},f.from_human=function(t){return(new f).parse_human(t)},f.is_valid=function(t){return f.from_json(t).is_valid()},f.is_valid_full=function(t){return f.from_json(t).is_valid_full()},f.NaN=function(){var t=new f;return t._value=0/0,t},f.prototype.abs=function(){return this.clone(this.is_negative())},f.prototype.add=function(t){var e;if(t=f.from_json(t),this.is_comparable(t))if(t.is_zero())e=this;else if(this.is_zero())e=t.clone(),e._is_native=this._is_native,e._currency=this._currency,e._issuer=this._issuer;else if(this._is_native){e=new f;var r=this._is_negative?this._value.negate():this._value,i=t._is_negative?t._value.negate():t._value,n=r.add(i);e._is_negative=n.compareTo(o.ZERO)<0,e._value=e._is_negative?n.negate():n,e._currency=this._currency,e._issuer=this._issuer}else{for(var r=this._is_negative?this._value.negate():this._value,s=this._offset,i=t._is_negative?t._value.negate():t._value,a=t._offset;a>s;)r=r.divide(h.bi_10),s+=1;for(;s>a;)i=i.divide(h.bi_10),a+=1;e=new f,e._is_native=!1,e._offset=s,e._value=r.add(i),e._is_negative=e._value.compareTo(o.ZERO)<0,e._is_negative&&(e._value=e._value.negate()),e._currency=this._currency,e._issuer=this._issuer,e.canonicalize()}else e=f.NaN();return e},f.prototype.canonicalize=function(){if(this._value instanceof o)if(this._is_native)if(this._value.equals(o.ZERO))this._offset=0,this._is_negative=!1;else{for(;this._offset<0;)this._value=this._value.divide(h.bi_10),this._offset+=1;for(;this._offset>0;)this._value=this._value.multiply(h.bi_10),this._offset-=1}else if(this.is_zero())this._offset=-100,this._is_negative=!1;else{for(;this._value.compareTo(h.bi_man_min_value)<0;)this._value=this._value.multiply(h.bi_10),this._offset-=1;for(;this._value.compareTo(h.bi_man_max_value)>0;)this._value=this._value.divide(h.bi_10),this._offset+=1}else;return this},f.prototype.clone=function(t){return this.copyTo(new f,t)},f.prototype.compareTo=function(t){var e;return this.is_comparable(t)?this._is_negative!==t._is_negative?e=this._is_negative?-1:1:this._value.equals(o.ZERO)?e=t._value.equals(o.ZERO)?0:-1:t._value.equals(o.ZERO)?e=1:!this._is_native&&this._offset>t._offset?e=this._is_negative?-1:1:!this._is_native&&this._offset<t._offset?e=this._is_negative?1:-1:(e=this._value.compareTo(t._value),e>0?e=this._is_negative?-1:1:0>e&&(e=this._is_negative?1:-1)):e=f.NaN(),e},f.prototype.copyTo=function(t,e){return"object"==typeof this._value?this._value.copyTo(t._value):t._value=this._value,t._offset=this._offset,t._is_native=this._is_native,t._is_negative=e?!this._is_negative:this._is_negative,t._currency=this._currency,t._issuer=this._issuer,t.is_zero()&&(t._is_negative=!1),t},f.prototype.currency=function(){return this._currency},f.prototype.equals=function(t,e){if("string"==typeof t)return this.equals(f.from_json(t));if(this===t)return!0;if(t instanceof f){if(!this.is_valid()||!t.is_valid())return!1;if(this._is_native!==t._is_native)return!1;if(!this._value.equals(t._value)||this._offset!==t._offset)return!1;if(this._is_negative!==t._is_negative)return!1;if(!this._is_native){if(!this._currency.equals(t._currency))return!1;if(!e&&!this._issuer.equals(t._issuer))return!1}return!0}return!1},f.prototype.divide=function(t){var e;if(t.is_zero())throw"divide by zero";if(this.is_zero())e=this;else{if(!this.is_valid())throw new Error("Invalid dividend");if(!t.is_valid())throw new Error("Invalid divisor");var r=this;if(r.is_native())for(r=r.clone();r._value.compareTo(h.bi_man_min_value)<0;)r._value=r._value.multiply(h.bi_10),r._offset-=1;var i=t;if(i.is_native())for(i=i.clone();i._value.compareTo(h.bi_man_min_value)<0;)i._value=i._value.multiply(h.bi_10),i._offset-=1;e=new f,e._offset=r._offset-i._offset-17,e._value=r._value.multiply(h.bi_1e17).divide(i._value).add(h.bi_5),e._is_native=r._is_native,e._is_negative=r._is_negative!==i._is_negative,e._currency=r._currency,e._issuer=r._issuer,e.canonicalize()}return e},f.prototype.ratio_human=function(t){t="number"==typeof t&&parseInt(t)===t?f.from_json(""+t+".0"):f.from_json(t);var e=this;return t=f.from_json(t),e.is_valid()&&t.is_valid()?(t._is_native&&(e=e.clone(),e._value=e._value.multiply(h.bi_xns_unit),e.canonicalize()),e.divide(t)):f.NaN()},f.prototype.product_human=function(t){if(t="number"==typeof t&&parseInt(t)===t?f.from_json(""+t+".0"):f.from_json(t),!this.is_valid()||!t.is_valid())return f.NaN();var e=this.multiply(t);return t._is_native&&(e._value=e._value.divide(h.bi_xns_unit),e.canonicalize()),e},f.prototype.is_comparable=function(t){return this._value instanceof o&&t._value instanceof o&&this._is_native===t._is_native},f.prototype.is_native=function(){return this._is_native},f.prototype.is_negative=function(){return this._value instanceof o?this._is_negative:!1},f.prototype.is_positive=function(){return!this.is_zero()&&!this.is_negative()},f.prototype.is_valid=function(){return this._value instanceof o},f.prototype.is_valid_full=function(){return this.is_valid()&&this._currency.is_valid()&&this._issuer.is_valid()},f.prototype.is_zero=function(){return this._value instanceof o?this._value.equals(o.ZERO):!1},f.prototype.issuer=function(){return this._issuer},f.prototype.multiply=function(t){var e;if(this.is_zero())e=this;else if(t.is_zero())e=this.clone(),e._value=o.ZERO;else{var r=this._value,i=this._offset,n=t._value,s=t._offset;if(this.is_native())for(;r.compareTo(h.bi_man_min_value)<0;)r=r.multiply(h.bi_10),i-=1;if(t.is_native())for(;n.compareTo(h.bi_man_min_value)<0;)n=n.multiply(h.bi_10),s-=1;e=new f,e._offset=i+s+14,e._value=r.multiply(n).divide(h.bi_1e14).add(h.bi_7),e._is_native=this._is_native,e._is_negative=this._is_negative!==t._is_negative,e._currency=this._currency,e._issuer=this._issuer,e.canonicalize()}return e},f.prototype.negate=function(){return this.clone("NEGATE")},f.prototype.invert=function(){var t=this.clone();return t._value=o.ONE,t._offset=0,t._is_negative=!1,t.canonicalize(),t.ratio_human(this)},f.prototype.parse_human=function(t){t=""+t;var e=t.match(/^\s*([a-z]{3})?\s*(-)?(\d+)(?:\.(\d*))?\s*([a-z]{3})?\s*$/i);if(e){var r=e[1]||e[5]||"XRP",i=e[3]||"0",n=e[4]||"",s=null;if(r=r.toUpperCase(),this._value=new o(i),this.set_currency(r),"XRP"===r){for(n=n.slice(0,6);n.length<6;)n+="0";this._is_native=!0,this._value=this._value.multiply(h.bi_xns_unit).add(new o(n))}else{for(;"0"===n[n.length-1];)n=n.slice(0,n.length-1);s=n.length,this._is_native=!1;var a=h.bi_10.clone().pow(s);this._value=this._value.multiply(a).add(new o(n)),this._offset=-s,this.canonicalize()}this._is_negative=!!e[2]}else this._value=0/0;return this},f.prototype.parse_issuer=function(t){return this._issuer=a.from_json(t),this},f.prototype.parse_quality=function(t,e,r){return this._is_negative=!1,this._value=new o(t.substring(t.length-14),16),this._offset=parseInt(t.substring(t.length-16,t.length-14),16)-100,this._currency=u.from_json(e),this._issuer=a.from_json(r),this._is_native=this._currency.is_native(),this.canonicalize(),this},f.prototype.parse_number=function(t){return this._is_native=!1,this._currency=u.from_json(1),this._issuer=a.from_json(1),this._is_negative=0>t?1:0,this._value=new o(String(this._is_negative?-t:t)),this._offset=0,this.canonicalize(),this},f.prototype.parse_json=function(t){if("string"==typeof t){var e=t.match(/^([^/]+)\/(...)(?:\/(.+))?$/);e?(this._currency=u.from_json(e[2]),this._issuer=e[3]?a.from_json(e[3]):a.from_json("1"),this.parse_value(e[1])):(this.parse_native(t),this._currency=u.from_json("0"),this._issuer=a.from_json("0"))}else"number"==typeof t?this.parse_json(""+t):"object"==typeof t&&t instanceof f?t.copyTo(this):"object"==typeof t&&"value"in t?(this._currency.parse_json(t.currency),"string"==typeof t.issuer&&this._issuer.parse_json(t.issuer),this.parse_value(t.value)):this._value=0/0;return this},f.prototype.parse_native=function(t){var e;if("string"==typeof t&&(e=t.match(/^(-?)(\d*)(\.\d{0,6})?$/)),e){if(void 0===e[3])this._value=new o(e[2]);else{var r=new o(e[2]).multiply(h.bi_xns_unit),i=new o(e[3]).multiply(new o(String(Math.pow(10,1+h.xns_precision-e[3].length))));this._value=r.add(i)}this._is_native=!0,this._offset=0,this._is_negative=!!e[1]&&0!==this._value.compareTo(o.ZERO),this._value.compareTo(h.bi_xns_max)>0&&(this._value=0/0)}else this._value=0/0;return this},f.prototype.parse_value=function(t){if(this._is_native=!1,"number"==typeof t)this._is_negative=0>t,this._value=new o(Math.abs(t)),this._offset=0,this.canonicalize();else if("string"==typeof t){var e=t.match(/^(-?)(\d+)$/),r=!e&&t.match(/^(-?)(\d*)\.(\d*)$/),i=!i&&t.match(/^(-?)(\d*)e(-?\d+)$/);if(i)this._value=new o(i[2]),this._offset=parseInt(i[3]),this._is_negative=!!i[1],this.canonicalize();else if(r){var n=new o(r[2]),s=new o(r[3]),a=r[3].length;this._value=n.multiply(h.bi_10.clone().pow(a)).add(s),this._offset=-a,this._is_negative=!!r[1],this.canonicalize()}else e?(this._value=new o(e[2]),this._offset=0,this._is_negative=!!e[1],this.canonicalize()):this._value=0/0}else this._value=t instanceof o?t:0/0;return this},f.prototype.set_currency=function(t){return this._currency=u.from_json(t),this._is_native=this._currency.is_native(),this},f.prototype.set_issuer=function(t){return this._issuer=t instanceof a?t:a.from_json(t),this},f.prototype.subtract=function(t){return this.add(f.from_json(t).negate())},f.prototype.to_number=function(t){var e=this.to_text(t);return"string"==typeof e?Number(e):e},f.prototype.to_text=function(t){if(this._value instanceof o){if(this._is_native)return this._value.compareTo(h.bi_xns_max)>0?t?0/0:"0":(this._is_negative?"-":"")+this._value.toString();if(this.is_zero())return"0";if(this._offset&&(this._offset<-25||this._offset>-4))return(this._is_negative?"-":"")+this._value.toString()+"e"+this._offset;var e="000000000000000000000000000"+this._value.toString()+"00000000000000000000000",r=e.substring(0,this._offset+43),i=e.substring(this._offset+43),n=r.match(/[1-9].*$/),s=i.match(/[1-9]0*$/);return(this._is_negative?"-":"")+(n?n[0]:"0")+(s?"."+i.substring(0,1+i.length-s[0].length):"")}return t?0/0:"0"},f.prototype.to_human=function(t){if(t=t||{},!this.is_valid())return"";"undefined"==typeof t.signed&&(t.signed=!0),"undefined"==typeof t.group_sep&&(t.group_sep=!0),t.group_width=t.group_width||3;for(var e=this._is_native?h.xns_precision:-this._offset,r=h.bi_10.clone().pow(e),i=this._value.divide(r).toString(10),s=this._value.mod(r).toString(10);s.length<e;)s="0"+s;if(i=i.replace(/^0*/,""),s=s.replace(/0*$/,""),s.length||!t.skip_empty_fraction){if("number"==typeof t.precision&&(s=s.slice(0,t.precision)),"number"==typeof t.max_sig_digits){var o=0===+i,a=o?0:i.length,c=o?s.replace(/^0*/,""):s;a+=c.length;var u=a-t.max_sig_digits;u=Math.max(u,0),u=Math.min(u,s.length),u>0&&(s=s.slice(0,-u))}if("number"==typeof t.min_precision)for(;s.length<t.min_precision;)s+="0"}t.group_sep&&("string"!=typeof t.group_sep&&(t.group_sep=","),i=n.chunkString(i,t.group_width,!0).join(t.group_sep));var f="";return t.signed&&this._is_negative&&("string"!=typeof t.signed&&(t.signed="-"),f+=t.signed),f+=i.length?i:"0",f+=s.length?"."+s:""},f.prototype.to_human_full=function(t){t=t||{};var e,r=this.to_human(t),i=this._currency.to_human(),n=this._issuer.to_json(t);return e=this._is_native?r+"/"+i:r+"/"+i+"/"+n},f.prototype.to_json=function(){if(this._is_native)return this.to_text();var t={value:this.to_text(),currency:this._currency.to_json()};return this._issuer.is_valid()&&(t.issuer=this._issuer.to_json()),t},f.prototype.to_text_full=function(t){return this._value instanceof o?this._is_native?this.to_human()+"/XRP":this.to_text()+"/"+this._currency.to_json()+"/"+this._issuer.to_json(t):0/0},f.prototype.not_equals_why=function(t,e){if("string"==typeof t)return this.not_equals_why(f.from_json(t));if(this===t)return!1;if(t instanceof f){if(!this.is_valid()||!t.is_valid())return"Invalid amount.";
if(this._is_native!==t._is_native)return"Native mismatch.";var r=this._is_native?"XRP":"Non-XRP";if(!this._value.equals(t._value)||this._offset!==t._offset)return r+" value differs.";if(this._is_negative!==t._is_negative)return r+" sign differs.";if(!this._is_native){if(!this._currency.equals(t._currency))return"Non-XRP currency differs.";if(!e&&!this._issuer.equals(t._issuer))return"Non-XRP issuer differs: "+t._issuer.to_json()+"/"+this._issuer.to_json()}return!1}return"Wrong constructor."},e.Amount=f,e.Currency=u,e.Seed=c,e.UInt160=a},3:function(t,e){var r=function(){this._value=0/0};r.json_rewrite=function(t){return r.from_json(t).to_json()},r.from_json=function(t){return t instanceof r?t.clone():(new r).parse_json(t)},r.from_bytes=function(t){return t instanceof r?t.clone():(new r).parse_bytes(t)},r.is_valid=function(t){return r.from_json(t).is_valid()},r.prototype.clone=function(){return this.copyTo(new r)},r.prototype.copyTo=function(t){return t._value=this._value,t},r.prototype.equals=function(t){return"string"!=typeof this._value&&isNaN(this._value)||"string"!=typeof t._value&&isNaN(t._value)?!1:this._value===t._value},r.prototype.parse_json=function(t){return this._value=t instanceof r?t:"string"==typeof t?""===t||"0"===t||"XRP"===t?0:3===t.length?t:0/0:"number"==typeof t?t:"string"!=typeof t||3!==t.length?0/0:t,this},r.prototype.parse_bytes=function(t){if(Array.isArray(t)&&20==t.length){for(var e=!0,r=0;20>r;r++)e=e&&(12===r||13===r||14===r||0===t[0]);if(e){var i=String.fromCharCode(t[12])+String.fromCharCode(t[13])+String.fromCharCode(t[14]);this._value=/^[A-Z]{3}$/.test(i)&&"XRP"!==i?i:"\0\0\0"===i?0:0/0}else this._value=0/0}else this._value=0/0;return this},r.prototype.is_native=function(){return!isNaN(this._value)&&!this._value},r.prototype.is_valid=function(){return"string"==typeof this._value||!isNaN(this._value)},r.prototype.to_json=function(){return this._value?this._value:"XRP"},r.prototype.to_human=function(){return this._value?this._value:"XRP"},e.Currency=r},4:function(t,e,r){var i=r(10),n=r(9),s=r(18),o=r(25),a=s.BigInteger,c=s.nbi,u={},h=u.alphabets={ripple:"rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz",tipple:"RPShNAF39wBUDnEGHJKLM4pQrsT7VWXYZ2bcdeCg65jkm8ofqi1tuvaxyz",bitcoin:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"};o(u,{VER_NONE:1,VER_NODE_PUBLIC:28,VER_NODE_PRIVATE:32,VER_ACCOUNT_ID:0,VER_ACCOUNT_PUBLIC:35,VER_ACCOUNT_PRIVATE:34,VER_FAMILY_GENERATOR:41,VER_FAMILY_SEED:33});var f=function(t){return i.codec.bytes.fromBits(i.hash.sha256.hash(i.codec.bytes.toBits(t)))},_=function(t){return f(f(t))};u.encode=function(t,e){for(var r=h[e||"ripple"],i=new a(String(r.length)),n=c(),s=c(),o=new a(t),u=[];o.compareTo(a.ZERO)>0;)o.divRemTo(i,n,s),n.copyTo(o),u.push(r[s.intValue()]);var f;for(f=0;f!=t.length&&!t[f];f+=1)u.push(r[0]);return u.reverse().join("")},u.decode=function(t,e){if("string"!=typeof t)return void 0;var r,i=h[e||"ripple"],s=new a(String(i.length)),o=c();for(r=0;r!=t.length&&t[r]===i[0];r+=1);for(;r!=t.length;r+=1){var u=i.indexOf(t[r]);if(0>u)return void 0;var f=c();f.fromInt(u),o=o.multiply(s).add(f)}for(var _=o.toByteArray().map(function(t){return t?0>t?256+t:t:0}),l=0;l!=_.length&&!_[l];)l+=1;l&&(_=_.slice(l));for(var p=0;p!==t.length&&t[p]===i[0];)p+=1;return[].concat(n.arraySet(p,0),_)},u.verify_checksum=function(t){for(var e=_(t.slice(0,-4)).slice(0,4),r=t.slice(-4),i=0;4>i;i++)if(e[i]!==r[i])return!1;return!0},u.encode_check=function(t,e,r){var i=[].concat(t,e),n=f(f(i)).slice(0,4);return u.encode([].concat(i,n),r)},u.decode_check=function(t,e,r){var i=u.decode(e,r);if(!i||i.length<5)return 0/0;if("number"==typeof t&&i[0]!==t)return 0/0;if("object"==typeof t&&Array.isArray(t)){for(var n=!1,s=0,o=t.length;o>s;s++)n|=t[s]===i[0];if(!n)return 0/0}return u.verify_checksum(i)?(i[0]=0,new a(i.slice(0,-4),256)):0/0},e.Base=u},5:function(t,e,r){var i=r(23).EventEmitter,n=r(24),s=r(10),o=r(2).Amount,a=r(2).Currency,c=r(2).UInt160,u=r(19).Seed,h=r(7).SerializedObject,f=r(11),_=4,l=8,p=function(t){i.call(this);var e=this;this.callback=void 0,this.remote=t,this._secret=void 0,this._build_path=!1,this.tx_json={Flags:0},this.hash=void 0,this.submit_index=void 0,this.state=void 0,this.finalized=!1,this.on("success",function(t){t.engine_result&&(e.hash=t.tx_json.hash,e.set_state("client_proposed"),e.emit("proposed",{tx_json:t.tx_json,result:t.engine_result,result_code:t.engine_result_code,result_message:t.engine_result_message,rejected:e.isRejected(t.engine_result_code)}))}),this.on("error",function(){e.set_state("remoteError")})};n.inherits(p,i),p.fee_units={"default":10},p.flags={AccountSet:{RequireDestTag:65536,OptionalDestTag:131072,RequireAuth:262144,OptionalAuth:524288,DisallowXRP:1048576,AllowXRP:2097152},OfferCreate:{Passive:65536,ImmediateOrCancel:131072,FillOrKill:262144,Sell:524288},Payment:{NoRippleDirect:65536,PartialPayment:131072,LimitQuality:262144}},p.formats=r(8).tx,p.HASH_SIGN=1398036480,p.HASH_SIGN_TESTNET=1937012736,p.prototype.consts={telLOCAL_ERROR:-399,temMALFORMED:-299,tefFAILURE:-199,terRETRY:-99,tesSUCCESS:0,tecCLAIMED:100},p.prototype.isTelLocal=function(t){return t>=this.consts.telLOCAL_ERROR&&t<this.consts.temMALFORMED},p.prototype.isTemMalformed=function(t){return t>=this.consts.temMALFORMED&&t<this.consts.tefFAILURE},p.prototype.isTefFailure=function(t){return t>=this.consts.tefFAILURE&&t<this.consts.terRETRY},p.prototype.isTerRetry=function(t){return t>=this.consts.terRETRY&&t<this.consts.tesSUCCESS},p.prototype.isTepSuccess=function(t){return t>=this.consts.tesSUCCESS},p.prototype.isTecClaimed=function(t){return t>=this.consts.tecCLAIMED},p.prototype.isRejected=function(t){return this.isTelLocal(t)||this.isTemMalformed(t)||this.isTefFailure(t)},p.prototype.set_state=function(t){this.state!==t&&(this.state=t,this.emit("state",t))},p.prototype.complete=function(){var t=this.tx_json;if("undefined"==typeof t.Fee&&this.remote.local_fee&&(this.tx_json.Fee=this.remote.fee_tx(this.fee_units()).to_json()),"undefined"==typeof t.SigningPubKey&&(!this.remote||this.remote.local_signing)){var e=u.from_json(this._secret),r=e.get_key(this.tx_json.Account);t.SigningPubKey=r.to_hex_pub()}return this.tx_json},p.prototype.serialize=function(){return h.from_json(this.tx_json)},p.prototype.signing_hash=function(){var t=f.testnet?p.HASH_SIGN_TESTNET:p.HASH_SIGN;return h.from_json(this.tx_json).signing_hash(t)},p.prototype.sign=function(){var t=u.from_json(this._secret),e=this.signing_hash(),r=t.get_key(this.tx_json.Account),i=r.sign(e,0),n=s.codec.hex.fromBits(i).toUpperCase();this.tx_json.TxnSignature=n},p.prototype._hasTransactionListeners=function(){return this.listeners("final").length||this.listeners("lost").length||this.listeners("pending").length},p.prototype.submit=function(t){function e(t){i.emit("error",t),i.callback("error",t)}function r(t){if(!i.finalized){var e=t.ledger_hash,n=t.ledger_index,s=i.remote.request_transaction_entry(i.hash);s.ledger_hash(e),s.on("success",function(t){i.finalized||(i.set_state(t.metadata.TransactionResult),i.remote.removeListener("ledger_closed",r),i.emit("final",t),i.finalized=!0,i.callback(t.metadata.TransactionResult,t))}),s.on("error",function(t){i.finalized||"remoteError"===t.error&&"transactionNotFound"===t.remote.error&&(i.submit_index+l<n?(i.set_state("client_lost"),i.emit("lost"),i.callback("tejLost",t),i.remote.removeListener("ledger_closed",r),i.emit("final",t),i.finalized=!0):i.submit_index+_<n?(i.set_state("client_missing"),i.emit("pending")):i.emit("pending"))}),s.request()}}var i=this,n=this.tx_json;if(this.callback="function"==typeof t?t:function(){},"string"!=typeof n.Account)return e({error:"tejInvalidAccount",error_message:"Bad account."}),this;if(this.complete(),this.submit_index=this.remote._ledger_current_index,this.remote.on("ledger_closed",r),this.once("error",function(t){i.callback(t.error,t)}),this.set_state("client_submitted"),i.remote.local_sequence&&!i.tx_json.Sequence){if(i.tx_json.Sequence=this.remote.account_seq(i.tx_json.Account,"ADVANCE"),!i.tx_json.Sequence){var s=this.remote.account_seq_cache(i.tx_json.Account,!1);return s.on("success_account_seq_cache",function(){i.submit()}),s.on("error_account_seq_cache",function(){i.remote.account_seq_cache(i.tx_json.Account,"CURRENT").on("success_account_seq_cache",function(){i.submit()}).on("error_account_seq_cache",function(t){i.emit("error",t)}).request()}),s.request(),this}this.once("success",function(t){if("string"==typeof t.engine_result)switch(t.engine_result.slice(0,3)){case"tej":i.remote.account_seq(i.tx_json.Account,"REWIND");break;case"ter":break;case"tel":case"tem":case"tef":i.remote.account_seq(i.tx_json.Account,"REWIND")}})}var o=this.remote.request_submit();return o.emit=this.emit.bind(this),this._secret||this.tx_json.Signature?(this.remote.local_signing?(this.sign(),o.tx_blob(this.serialize().to_hex())):(this.remote.trusted||e({result:"tejServerUntrusted",result_message:"Attempt to give a secret to an untrusted server."}),o.secret(this._secret),o.build_path(this._build_path),o.tx_json(this.tx_json)),o.request(),this):(e({result:"tejSecretUnknown",result_message:"Could not sign transactions because we."}),this)},p.prototype.build_path=function(t){return this._build_path=t,this},p.prototype.destination_tag=function(t){return void 0!==t&&(this.tx_json.DestinationTag=t),this},p._path_rewrite=function(t){for(var e=[],r=0,i=t.length;i>r;r++){var n=t[r],s={};"account"in n&&(s.account=c.json_rewrite(n.account)),"issuer"in n&&(s.issuer=c.json_rewrite(n.issuer)),"currency"in n&&(s.currency=a.json_rewrite(n.currency)),e.push(s)}return e},p.prototype.path_add=function(t){return this.tx_json.Paths=this.tx_json.Paths||[],this.tx_json.Paths.push(p._path_rewrite(t)),this},p.prototype.paths=function(t){for(var e=0,r=t.length;r>e;e++)this.path_add(t[e]);return this},p.prototype.secret=function(t){this._secret=t},p.prototype.send_max=function(t){return t&&(this.tx_json.SendMax=o.json_rewrite(t)),this},p.prototype.source_tag=function(t){return t&&(this.tx_json.SourceTag=t),this},p.prototype.transfer_rate=function(t){if(this.tx_json.TransferRate=Number(t),this.tx_json.TransferRate<1e9)throw new Error("invalidTransferRate");return this},p.prototype.set_flags=function(t){if(t){var e=p.flags[this.tx_json.TransactionType];void 0===this.tx_json.Flags&&(this.tx_json.Flags=0);var r=Array.isArray(t)?t:[t];for(var i in r)if(r.hasOwnProperty(i)){var n=r[i];n in e&&(this.tx_json.Flags+=e[n])}}return this},p.prototype._account_secret=function(t){return this.remote.secrets[t]},p.prototype.account_set=function(t){return this._secret=this._account_secret(t),this.tx_json.TransactionType="AccountSet",this.tx_json.Account=c.json_rewrite(t),this},p.prototype.claim=function(t,e,r,i){return this._secret=this._account_secret(t),this.tx_json.TransactionType="Claim",this.tx_json.Generator=e,this.tx_json.PublicKey=r,this.tx_json.Signature=i,this},p.prototype.offer_cancel=function(t,e){return this._secret=this._account_secret(t),this.tx_json.TransactionType="OfferCancel",this.tx_json.Account=c.json_rewrite(t),this.tx_json.OfferSequence=Number(e),this},p.prototype.offer_create=function(t,e,r,i,n){return this._secret=this._account_secret(t),this.tx_json.TransactionType="OfferCreate",this.tx_json.Account=c.json_rewrite(t),this.tx_json.TakerPays=o.json_rewrite(e),this.tx_json.TakerGets=o.json_rewrite(r),i&&(this.tx_json.Expiration=i instanceof Date?i.getTime():Number(i)),n&&(this.tx_json.OfferSequence=Number(n)),this},p.prototype.password_fund=function(t,e){return this._secret=this._account_secret(t),this.tx_json.TransactionType="PasswordFund",this.tx_json.Destination=c.json_rewrite(e),this},p.prototype.password_set=function(t,e,r,i,n){return this._secret=this._account_secret(t),this.tx_json.TransactionType="PasswordSet",this.tx_json.RegularKey=e,this.tx_json.Generator=r,this.tx_json.PublicKey=i,this.tx_json.Signature=n,this},p.prototype.payment=function(t,e,r){return this._secret=this._account_secret(t),this.tx_json.TransactionType="Payment",this.tx_json.Account=c.json_rewrite(t),this.tx_json.Amount=o.json_rewrite(r),this.tx_json.Destination=c.json_rewrite(e),this},p.prototype.ripple_line_set=function(t,e,r,i){return this._secret=this._account_secret(t),this.tx_json.TransactionType="TrustSet",this.tx_json.Account=c.json_rewrite(t),void 0!==e&&(this.tx_json.LimitAmount=o.json_rewrite(e)),r&&(this.tx_json.QualityIn=r),i&&(this.tx_json.QualityOut=i),this},p.prototype.wallet_add=function(t,e,r,i,n){return this._secret=this._account_secret(t),this.tx_json.TransactionType="WalletAdd",this.tx_json.Amount=o.json_rewrite(e),this.tx_json.RegularKey=r,this.tx_json.PublicKey=i,this.tx_json.Signature=n,this},p.prototype.fee_units=function(){return p.fee_units["default"]},e.Transaction=p},6:function(t,e,r){var i=r(25),n=r(9),s=r(14).UInt160,o=r(2).Amount,a=function(t){this.nodes=[];for(var e=0,r=t.AffectedNodes.length;r>e;e++){var n=t.AffectedNodes[e],s={};if(["CreatedNode","ModifiedNode","DeletedNode"].forEach(function(t){n[t]&&(s.diffType=t)}),!s.diffType)return null;n=n[s.diffType],s.entryType=n.LedgerEntryType,s.ledgerIndex=n.LedgerIndex,s.fields=i({},n.PreviousFields,n.NewFields,n.FinalFields),s.fieldsPrev=n.PreviousFields||{},s.fieldsNew=n.NewFields||{},s.fieldsFinal=n.FinalFields||{},this.nodes.push(s)}};a.prototype.each=function(t){for(var e=0,r=this.nodes.length;r>e;e++)t(this.nodes[e],e)};var c=["LowLimit","HighLimit","TakerPays","TakerGets"];a.prototype.getAffectedAccounts=function(){var t=[];return this.each(function(e){var r="CreatedNode"===e.diffType?e.fieldsNew:e.fieldsFinal;for(var i in r){var n=r[i];if("string"==typeof n&&s.is_valid(n))t.push(n);else if(-1!==c.indexOf(i)){var a=o.from_json(n),u=a.issuer();u.is_valid()&&!u.is_zero()&&t.push(u.to_json())}}}),t=n.arrayUnique(t)},a.prototype.getAffectedBooks=function(){var t=[];return this.each(function(e){if("Offer"===e.entryType){var r=o.from_json(e.fields.TakerGets),i=o.from_json(e.fields.TakerPays),n=r.currency().to_json();"XRP"!==n&&(n+="/"+r.issuer().to_json());var s=i.currency().to_json();"XRP"!==s&&(s+="/"+i.issuer().to_json());var a=n+":"+s;t.push(a)}}),t=n.arrayUnique(t)},e.Meta=a},7:function(t,e,r){function i(t,e){return t[3].id!==e[3].id?t[3].id-e[3].id:t[2]-e[2]}var n=r(8),s=r(10),o=r(25),a=r(20),c=r(21).UInt256,u=function(t){if(Array.isArray(t))this.buffer=t;else if("string"==typeof t)this.buffer=s.codec.bytes.fromBits(s.codec.hex.toBits(t));else{if(t)throw new Error("Invalid buffer passed.");this.buffer=[]}this.pointer=0};u.from_json=function(t){var e,r=new u;if(t=o({},t),"number"==typeof t.TransactionType&&(t.TransactionType=u.lookup_type_tx(t.TransactionType),!t.TransactionType))throw new Error("Transaction type ID is invalid.");if("string"!=typeof t.TransactionType)throw"undefined"!=typeof t.LedgerEntryType?new Error("Ledger entry binary format not yet implemented."):new Error("Object to be serialized must contain either TransactionType or LedgerEntryType.");return e=n.tx[t.TransactionType].slice(),t.TransactionType=e.shift(),r.serialize(e,t),r},u.prototype.append=function(t){this.buffer=this.buffer.concat(t),this.pointer+=t.length},u.prototype.resetPointer=function(){this.pointer=0},u.prototype.read=function(t){var e=this.pointer,r=e+t;if(r>this.buffer.length)throw new Error("There aren't that many bytes left to read.");var i=this.buffer.slice(e,r);return this.pointer=r,i},u.prototype.to_bits=function(){return s.codec.bytes.toBits(this.buffer)},u.prototype.to_hex=function(){return s.codec.hex.fromBits(this.to_bits()).toUpperCase()},u.prototype.serialize=function(t,e){t=u._sort_typedef(t.slice());for(var r=0,i=t.length;i>r;r++){var n=t[r];this.serialize_field(n,e)}},u.prototype.signing_hash=function(t){var e=new u;return a.Int32.serialize(e,t),e.append(this.buffer),e.hash_sha512_half()},u.prototype.hash_sha512_half=function(){var t=s.codec.bytes.toBits(this.buffer),e=s.bitArray.bitSlice(s.hash.sha512.hash(t),0,256);return c.from_hex(s.codec.hex.fromBits(e))},u.prototype.serialize_field=function(t,e){t=t.slice();var r=t.shift(),i=t.shift(),s=t.shift(),o=t.shift();if("undefined"!=typeof e[r]){this.append(u.get_field_header(o.id,s));try{o.serialize(this,e[r])}catch(a){throw a.message="Error serializing '"+r+"': "+a.message,a}}else if(i===n.REQUIRED)throw new Error("Missing required field "+r)},u.get_field_header=function(t,e){var r=[0];return t>15?r.push(255&t):r[0]+=(15&t)<<4,e>15?r.push(255&e):r[0]+=15&e,r},u._sort_typedef=function(t){return t.sort(i)},u.lookup_type_tx=function(t){for(var e in n.tx)if(n.tx.hasOwnProperty(e)&&n.tx[e][0]===t)return e;return null},e.SerializedObject=u},8:function(t,e,r){var i=r(20),n=e.REQUIRED=0,s=e.OPTIONAL=1,o=e.DEFAULT=2;i.Int16.id=1,i.Int32.id=2,i.Int64.id=3,i.Hash128.id=4,i.Hash256.id=5,i.Amount.id=6,i.VariableLength.id=7,i.Account.id=8,i.Object.id=14,i.Array.id=15,i.Int8.id=16,i.Hash160.id=17,i.PathSet.id=18,i.Vector256.id=19;var a=[["TransactionType",n,2,i.Int16],["Flags",s,2,i.Int32],["SourceTag",s,3,i.Int32],["Account",n,1,i.Account],["Sequence",n,4,i.Int32],["Fee",n,8,i.Amount],["OperationLimit",s,29,i.Int32],["SigningPubKey",n,3,i.VariableLength],["TxnSignature",s,4,i.VariableLength]];e.tx={AccountSet:[3].concat(a,[["EmailHash",s,1,i.Hash128],["WalletLocator",s,7,i.Hash256],["WalletSize",s,12,i.Int32],["MessageKey",s,2,i.VariableLength],["Domain",s,7,i.VariableLength],["TransferRate",s,11,i.Int32]]),TrustSet:[20].concat(a,[["LimitAmount",s,3,i.Amount],["QualityIn",s,20,i.Int32],["QualityOut",s,21,i.Int32]]),OfferCreate:[7].concat(a,[["TakerPays",n,4,i.Amount],["TakerGets",n,5,i.Amount],["Expiration",s,10,i.Int32]]),OfferCancel:[8].concat(a,[["OfferSequence",n,25,i.Int32]]),SetRegularKey:[5].concat(a,[["RegularKey",n,8,i.Account]]),Payment:[0].concat(a,[["Destination",n,3,i.Account],["Amount",n,1,i.Amount],["SendMax",s,9,i.Amount],["Paths",o,1,i.PathSet],["InvoiceID",s,17,i.Hash256],["DestinationTag",s,14,i.Int32]]),Contract:[9].concat(a,[["Expiration",n,10,i.Int32],["BondAmount",n,23,i.Int32],["StampEscrow",n,22,i.Int32],["RippleEscrow",n,17,i.Amount],["CreateCode",s,11,i.VariableLength],["FundCode",s,8,i.VariableLength],["RemoveCode",s,9,i.VariableLength],["ExpireCode",s,10,i.VariableLength]]),RemoveContract:[10].concat(a,[["Target",n,7,i.Account]]),EnableFeature:[100].concat(a,[["Feature",n,19,i.Hash256]]),SetFee:[101].concat(a,[["Features",n,9,i.Array],["BaseFee",n,5,i.Int64],["ReferenceFeeUnits",n,30,i.Int32],["ReserveBase",n,31,i.Int32],["ReserveIncrement",n,32,i.Int32]])}},9:function(t,e,r){var e=t.exports=r(12);e.logObject=function(t,e){/MSIE/.test(navigator.userAgent)?console.log(t,JSON.stringify(e)):console.log(t,"",e)}},10:function(t,e,r){!function(t,e){"use strict";var r={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};"undefined"!=typeof e&&e.exports&&(e.exports=r),r.cipher.aes=function(t){this._tables[0][0][0]||this._precompute();var e,i,n,s,o,a=this._tables[0][4],c=this._tables[1],u=t.length,h=1;if(4!==u&&6!==u&&8!==u)throw new r.exception.invalid("invalid aes key size");for(this._key=[s=t.slice(0),o=[]],e=u;4*u+28>e;e++)n=s[e-1],(0===e%u||8===u&&4===e%u)&&(n=a[n>>>24]<<24^a[255&n>>16]<<16^a[255&n>>8]<<8^a[255&n],0===e%u&&(n=n<<8^n>>>24^h<<24,h=h<<1^283*(h>>7))),s[e]=s[e-u]^n;for(i=0;e;i++,e--)n=s[3&i?e:e-4],o[i]=4>=e||4>i?n:c[0][a[n>>>24]]^c[1][a[255&n>>16]]^c[2][a[255&n>>8]]^c[3][a[255&n]]},r.cipher.aes.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,r,i,n,s,o,a,c,u=this._tables[0],h=this._tables[1],f=u[4],_=h[4],l=[],p=[];for(t=0;256>t;t++)p[(l[t]=t<<1^283*(t>>7))^t]=t;for(e=r=0;!f[e];e^=i||1,r=p[r]||1)for(o=r^r<<1^r<<2^r<<3^r<<4,o=99^(o>>8^255&o),f[e]=o,_[o]=e,s=l[n=l[i=l[e]]],c=16843009*s^65537*n^257*i^16843008*e,a=257*l[o]^16843008*o,t=0;4>t;t++)u[t][e]=a=a<<24^a>>>8,h[t][o]=c=c<<24^c>>>8;for(t=0;5>t;t++)u[t]=u[t].slice(0),h[t]=h[t].slice(0)},_crypt:function(t,e){if(4!==t.length)throw new r.exception.invalid("invalid aes block size");var i,n,s,o,a=this._key[e],c=t[0]^a[0],u=t[e?3:1]^a[1],h=t[2]^a[2],f=t[e?1:3]^a[3],_=a.length/4-2,l=4,p=[0,0,0,0],d=this._tables[e],v=d[0],m=d[1],y=d[2],g=d[3],b=d[4];for(o=0;_>o;o++)i=v[c>>>24]^m[255&u>>16]^y[255&h>>8]^g[255&f]^a[l],n=v[u>>>24]^m[255&h>>16]^y[255&f>>8]^g[255&c]^a[l+1],s=v[h>>>24]^m[255&f>>16]^y[255&c>>8]^g[255&u]^a[l+2],f=v[f>>>24]^m[255&c>>16]^y[255&u>>8]^g[255&h]^a[l+3],l+=4,c=i,u=n,h=s;for(o=0;4>o;o++)p[e?3&-o:o]=b[c>>>24]<<24^b[255&u>>16]<<16^b[255&h>>8]<<8^b[255&f]^a[l++],i=c,c=u,u=h,h=f,f=i;return p}},r.bitArray={bitSlice:function(t,e,i){return t=r.bitArray._shiftRight(t.slice(e/32),32-(31&e)).slice(1),void 0===i?t:r.bitArray.clamp(t,i-e)},extract:function(t,e,r){var i,n=Math.floor(31&-e-r);return i=-32&(e+r-1^e)?t[0|e/32]<<32-n^t[0|e/32+1]>>>n:t[0|e/32]>>>n,i&(1<<r)-1},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var i=t[t.length-1],n=r.bitArray.getPartial(i);return 32===n?t.concat(e):r.bitArray._shiftRight(e,n,0|i,t.slice(0,t.length-1))},bitLength:function(t){var e,i=t.length;return 0===i?0:(e=t[i-1],32*(i-1)+r.bitArray.getPartial(e))},clamp:function(t,e){if(32*t.length<e)return t;t=t.slice(0,Math.ceil(e/32));var i=t.length;return e=31&e,i>0&&e&&(t[i-1]=r.bitArray.partial(e,t[i-1]&2147483648>>e-1,1)),t},partial:function(t,e,r){return 32===t?e:(r?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(r.bitArray.bitLength(t)!==r.bitArray.bitLength(e))return!1;var i,n=0;for(i=0;i<t.length;i++)n|=t[i]^e[i];return 0===n},_shiftRight:function(t,e,i,n){var s,o,a=0;for(void 0===n&&(n=[]);e>=32;e-=32)n.push(i),i=0;if(0===e)return n.concat(t);for(s=0;s<t.length;s++)n.push(i|t[s]>>>e),i=t[s]<<32-e;return a=t.length?t[t.length-1]:0,o=r.bitArray.getPartial(a),n.push(r.bitArray.partial(31&e+o,e+o>32?i:n.pop(),1)),n},_xor4:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]}},r.codec.utf8String={fromBits:function(t){var e,i,n="",s=r.bitArray.bitLength(t);for(e=0;s/8>e;e++)0===(3&e)&&(i=t[e/4]),n+=String.fromCharCode(i>>>24),i<<=8;return decodeURIComponent(escape(n))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,i=[],n=0;for(e=0;e<t.length;e++)n=n<<8|t.charCodeAt(e),3===(3&e)&&(i.push(n),n=0);return 3&e&&i.push(r.bitArray.partial(8*(3&e),n)),i}},r.codec.hex={fromBits:function(t){var e,i="";for(e=0;e<t.length;e++)i+=((0|t[e])+0xf00000000000).toString(16).substr(4);return i.substr(0,r.bitArray.bitLength(t)/4)},toBits:function(t){var e,i,n=[];for(t=t.replace(/\s|0x/g,""),i=t.length,t+="00000000",e=0;e<t.length;e+=8)n.push(0^parseInt(t.substr(e,8),16));return r.bitArray.clamp(n,4*i)}},r.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,i){var n,s="",o=0,a=r.codec.base64._chars,c=0,u=r.bitArray.bitLength(t);for(i&&(a=a.substr(0,62)+"-_"),n=0;6*s.length<u;)s+=a.charAt((c^t[n]>>>o)>>>26),6>o?(c=t[n]<<6-o,o+=26,n++):(c<<=6,o-=6);for(;3&s.length&&!e;)s+="=";return s},toBits:function(t,e){t=t.replace(/\s|=/g,"");var i,n,s=[],o=0,a=r.codec.base64._chars,c=0;for(e&&(a=a.substr(0,62)+"-_"),i=0;i<t.length;i++){if(n=a.indexOf(t.charAt(i)),0>n)throw new r.exception.invalid("this isn't base64!");o>26?(o-=26,s.push(c^n>>>o),c=n<<32-o):(o+=6,c^=n<<32-o)}return 56&o&&s.push(r.bitArray.partial(56&o,c,1)),s}},r.codec.base64url={fromBits:function(t){return r.codec.base64.fromBits(t,1,1)},toBits:function(t){return r.codec.base64.toBits(t,1)}},r.codec.bytes={fromBits:function(t){var e,i,n=[],s=r.bitArray.bitLength(t);for(e=0;s/8>e;e++)0===(3&e)&&(i=t[e/4]),n.push(i>>>24),i<<=8;return n},toBits:function(t){var e,i=[],n=0;for(e=0;e<t.length;e++)n=n<<8|t[e],3===(3&e)&&(i.push(n),n=0);return 3&e&&i.push(r.bitArray.partial(8*(3&e),n)),i}},r.hash.sha256=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},r.hash.sha256.hash=function(t){return(new r.hash.sha256).update(t).finalize()},r.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=r.codec.utf8String.toBits(t));var e,i=this._buffer=r.bitArray.concat(this._buffer,t),n=this._length,s=this._length=n+r.bitArray.bitLength(t);for(e=-512&512+n;s>=e;e+=512)this._block(i.splice(0,16));return this},finalize:function(){var t,e=this._buffer,i=this._h;for(e=r.bitArray.concat(e,[r.bitArray.partial(1,1)]),t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,16));return this.reset(),i},_init:[],_key:[],_precompute:function(){function t(t){return 0|4294967296*(t-Math.floor(t))}var e,r=0,i=2;t:for(;64>r;i++){for(e=2;i>=e*e;e++)if(0===i%e)continue t;8>r&&(this._init[r]=t(Math.pow(i,.5))),this._key[r]=t(Math.pow(i,1/3)),r++}},_block:function(t){var e,r,i,n,s=t.slice(0),o=this._h,a=this._key,c=o[0],u=o[1],h=o[2],f=o[3],_=o[4],l=o[5],p=o[6],d=o[7];for(e=0;64>e;e++)16>e?r=s[e]:(i=s[15&e+1],n=s[15&e+14],r=s[15&e]=0|(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(n>>>17^n>>>19^n>>>10^n<<15^n<<13)+s[15&e]+s[15&e+9]),r=r+d+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(p^_&(l^p))+a[e],d=p,p=l,l=_,_=0|f+r,f=h,h=u,u=c,c=0|r+(u&h^f&(u^h))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10);o[0]=0|o[0]+c,o[1]=0|o[1]+u,o[2]=0|o[2]+h,o[3]=0|o[3]+f,o[4]=0|o[4]+_,o[5]=0|o[5]+l,o[6]=0|o[6]+p,o[7]=0|o[7]+d}},r.hash.sha512=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},r.hash.sha512.hash=function(t){return(new r.hash.sha512).update(t).finalize()},r.hash.sha512.prototype={blockSize:1024,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=r.codec.utf8String.toBits(t));var e,i=this._buffer=r.bitArray.concat(this._buffer,t),n=this._length,s=this._length=n+r.bitArray.bitLength(t);for(e=-1024&1024+n;s>=e;e+=1024)this._block(i.splice(0,32));return this},finalize:function(){var t,e=this._buffer,i=this._h;for(e=r.bitArray.concat(e,[r.bitArray.partial(1,1)]),t=e.length+4;31&t;t++)e.push(0);for(e.push(0),e.push(0),e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,32));return this.reset(),i},_init:[],_initr:[12372232,13281083,9762859,1914609,15106769,4090911,4308331,8266105],_key:[],_keyr:[2666018,15689165,5061423,9034684,4764984,380953,1658779,7176472,197186,7368638,14987916,16757986,8096111,1480369,13046325,6891156,15813330,5187043,9229749,11312229,2818677,10937475,4324308,1135541,6741931,11809296,16458047,15666916,11046850,698149,229999,945776,13774844,2541862,12856045,9810911,11494366,7844520,15576806,8533307,15795044,4337665,16291729,5553712,15684120,6662416,7413802,12308920,13816008,4303699,9366425,10176680,13195875,4295371,6546291,11712675,15708924,1519456,15772530,6568428,6495784,8568297,13007125,7492395,2515356,12632583,14740254,7262584,1535930,13146278,16321966,1853211,294276,13051027,13221564,1051980,4080310,6651434,14088940,4675607],_precompute:function(){function t(t){return 0|4294967296*(t-Math.floor(t))}function e(t){return 255&1099511627776*(t-Math.floor(t))}var r,i=0,n=2;t:for(;80>i;n++){for(r=2;n>=r*r;r++)if(0===n%r)continue t;8>i&&(this._init[2*i]=t(Math.pow(n,.5)),this._init[2*i+1]=e(Math.pow(n,.5))<<24|this._initr[i]),this._key[2*i]=t(Math.pow(n,1/3)),this._key[2*i+1]=e(Math.pow(n,1/3))<<24|this._keyr[i],i++}},_block:function(t){var e,r,i,n=t.slice(0),s=this._h,o=this._key,a=s[0],c=s[1],u=s[2],h=s[3],f=s[4],_=s[5],l=s[6],p=s[7],d=s[8],v=s[9],m=s[10],y=s[11],g=s[12],b=s[13],w=s[14],x=s[15],E=a,A=c,T=u,j=h,S=f,B=_,k=l,q=p,R=d,D=v,O=m,M=y,I=g,C=b,L=w,z=x;for(e=0;80>e;e++){if(16>e)r=n[2*e],i=n[2*e+1];else{var N=n[2*(e-15)],P=n[2*(e-15)+1],F=(P<<31|N>>>1)^(P<<24|N>>>8)^N>>>7,U=(N<<31|P>>>1)^(N<<24|P>>>8)^(N<<25|P>>>7),V=n[2*(e-2)],G=n[2*(e-2)+1],X=(G<<13|V>>>19)^(V<<3|G>>>29)^V>>>6,H=(V<<13|G>>>19)^(G<<3|V>>>29)^(V<<26|G>>>6),Z=n[2*(e-7)],K=n[2*(e-7)+1],J=n[2*(e-16)],W=n[2*(e-16)+1];i=U+K,r=F+Z+(U>>>0>i>>>0?1:0),i+=H,r+=X+(H>>>0>i>>>0?1:0),i+=W,r+=J+(W>>>0>i>>>0?1:0)}n[2*e]=r|=0,n[2*e+1]=i|=0;var Y=R&O^~R&I,Q=D&M^~D&C,$=E&T^E&S^T&S,te=A&j^A&B^j&B,ee=(A<<4|E>>>28)^(E<<30|A>>>2)^(E<<25|A>>>7),re=(E<<4|A>>>28)^(A<<30|E>>>2)^(A<<25|E>>>7),ie=(D<<18|R>>>14)^(D<<14|R>>>18)^(R<<23|D>>>9),ne=(R<<18|D>>>14)^(R<<14|D>>>18)^(D<<23|R>>>9),se=o[2*e],oe=o[2*e+1],ae=z+ne,ce=L+ie+(z>>>0>ae>>>0?1:0);ae+=Q,ce+=Y+(Q>>>0>ae>>>0?1:0),ae+=oe,ce+=se+(oe>>>0>ae>>>0?1:0),ae+=i,ce+=r+(i>>>0>ae>>>0?1:0);var ue=re+te,he=ee+$+(re>>>0>ue>>>0?1:0);L=I,z=C,I=O,C=M,O=R,M=D,D=0|q+ae,R=0|k+ce+(q>>>0>D>>>0?1:0),k=S,q=B,S=T,B=j,T=E,j=A,A=0|ae+ue,E=0|ce+he+(ae>>>0>A>>>0?1:0)}c=s[1]=0|c+A,s[0]=0|a+E+(A>>>0>c>>>0?1:0),h=s[3]=0|h+j,s[2]=0|u+T+(j>>>0>h>>>0?1:0),_=s[5]=0|_+B,s[4]=0|f+S+(B>>>0>_>>>0?1:0),p=s[7]=0|p+q,s[6]=0|l+k+(q>>>0>p>>>0?1:0),v=s[9]=0|v+D,s[8]=0|d+R+(D>>>0>v>>>0?1:0),y=s[11]=0|y+M,s[10]=0|m+O+(M>>>0>y>>>0?1:0),b=s[13]=0|b+C,s[12]=0|g+I+(C>>>0>b>>>0?1:0),x=s[15]=0|x+z,s[14]=0|w+L+(z>>>0>x>>>0?1:0)}},r.hash.sha1=function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},r.hash.sha1.hash=function(t){return(new r.hash.sha1).update(t).finalize()},r.hash.sha1.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=r.codec.utf8String.toBits(t));var e,i=this._buffer=r.bitArray.concat(this._buffer,t),n=this._length,s=this._length=n+r.bitArray.bitLength(t);for(e=this.blockSize+n&-this.blockSize;s>=e;e+=this.blockSize)this._block(i.splice(0,16));return this},finalize:function(){var t,e=this._buffer,i=this._h;for(e=r.bitArray.concat(e,[r.bitArray.partial(1,1)]),t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,16));return this.reset(),i},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(t,e,r,i){return 19>=t?e&r|~e&i:39>=t?e^r^i:59>=t?e&r|e&i|r&i:79>=t?e^r^i:void 0},_S:function(t,e){return e<<t|e>>>32-t},_block:function(t){var e,r,i,n,s,o,a,c=t.slice(0),u=this._h;for(this._key,i=u[0],n=u[1],s=u[2],o=u[3],a=u[4],e=0;79>=e;e++)e>=16&&(c[e]=this._S(1,c[e-3]^c[e-8]^c[e-14]^c[e-16])),r=0|this._S(5,i)+this._f(e,n,s,o)+a+c[e]+this._key[Math.floor(e/20)],a=o,o=s,s=this._S(30,n),n=i,i=r;u[0]=0|u[0]+i,u[1]=0|u[1]+n,u[2]=0|u[2]+s,u[3]=0|u[3]+o,u[4]=0|u[4]+a}},r.mode.ccm={name:"ccm",encrypt:function(t,e,i,n,s){var o,a,c=e.slice(0),u=r.bitArray,h=u.bitLength(i)/8,f=u.bitLength(c)/8;if(s=s||64,n=n||[],7>h)throw new r.exception.invalid("ccm: iv must be at least 7 bytes");for(o=2;4>o&&f>>>8*o;o++);return 15-h>o&&(o=15-h),i=u.clamp(i,8*(15-o)),a=r.mode.ccm._computeTag(t,e,i,n,s,o),c=r.mode.ccm._ctrMode(t,c,i,a,s,o),u.concat(c.data,c.tag)},decrypt:function(t,e,i,n,s){s=s||64,n=n||[];var o,a,c=r.bitArray,u=c.bitLength(i)/8,h=c.bitLength(e),f=c.clamp(e,h-s),_=c.bitSlice(e,h-s);if(h=(h-s)/8,7>u)throw new r.exception.invalid("ccm: iv must be at least 7 bytes");for(o=2;4>o&&h>>>8*o;o++);if(15-u>o&&(o=15-u),i=c.clamp(i,8*(15-o)),f=r.mode.ccm._ctrMode(t,f,i,_,s,o),a=r.mode.ccm._computeTag(t,f.data,i,n,s,o),!c.equal(f.tag,a))throw new r.exception.corrupt("ccm: tag doesn't match");return f.data},_computeTag:function(t,e,i,n,s,o){var a,c,u,h=[],f=r.bitArray,_=f._xor4;if(s/=8,s%2||4>s||s>16)throw new r.exception.invalid("ccm: invalid tag length");if(n.length>4294967295||e.length>4294967295)throw new r.exception.bug("ccm: can't deal with 4GiB or more data");
if(a=[f.partial(8,(n.length?64:0)|s-2<<2|o-1)],a=f.concat(a,i),a[3]|=f.bitLength(e)/8,a=t.encrypt(a),n.length)for(c=f.bitLength(n)/8,65279>=c?h=[f.partial(16,c)]:4294967295>=c&&(h=f.concat([f.partial(16,65534)],[c])),h=f.concat(h,n),u=0;u<h.length;u+=4)a=t.encrypt(_(a,h.slice(u,u+4).concat([0,0,0])));for(u=0;u<e.length;u+=4)a=t.encrypt(_(a,e.slice(u,u+4).concat([0,0,0])));return f.clamp(a,8*s)},_ctrMode:function(t,e,i,n,s,o){var a,c,u,h=r.bitArray,f=h._xor4,_=e.length,l=h.bitLength(e);if(u=h.concat([h.partial(8,o-1)],i).concat([0,0,0]).slice(0,4),n=h.bitSlice(f(n,t.encrypt(u)),0,s),!_)return{tag:n,data:[]};for(c=0;_>c;c+=4)u[3]++,a=t.encrypt(u),e[c]^=a[0],e[c+1]^=a[1],e[c+2]^=a[2],e[c+3]^=a[3];return{tag:n,data:h.clamp(e,l)}}},r.misc.hmac=function(t,e){this._hash=e=e||r.hash.sha256;var i,n=[[],[]],s=e.prototype.blockSize/32;for(this._baseHash=[new e,new e],t.length>s&&(t=e.hash(t)),i=0;s>i;i++)n[0][i]=909522486^t[i],n[1][i]=1549556828^t[i];this._baseHash[0].update(n[0]),this._baseHash[1].update(n[1])},r.misc.hmac.prototype.encrypt=r.misc.hmac.prototype.mac=function(t){var e=new this._hash(this._baseHash[0]).update(t).finalize();return new this._hash(this._baseHash[1]).update(e).finalize()},r.misc.pbkdf2=function(t,e,i,n,s){if(i=i||1e3,0>n||0>i)throw r.exception.invalid("invalid params to pbkdf2");"string"==typeof t&&(t=r.codec.utf8String.toBits(t)),s=s||r.misc.hmac;var o,a,c,u,h,f=new s(t),_=[],l=r.bitArray;for(h=1;32*_.length<(n||1);h++){for(o=a=f.encrypt(l.concat(e,[h])),c=1;i>c;c++)for(a=f.encrypt(a),u=0;u<a.length;u++)o[u]^=a[u];_=_.concat(o)}return n&&(_=l.clamp(_,n)),_},r.prng=function(t){this._pools=[new r.hash.sha256],this._poolEntropy=[0],this._reseedCount=0,this._robins={},this._eventId=0,this._collectorIds={},this._collectorIdNext=0,this._strength=0,this._poolStrength=0,this._nextReseed=0,this._key=[0,0,0,0,0,0,0,0],this._counter=[0,0,0,0],this._cipher=void 0,this._defaultParanoia=t,this._collectorsStarted=!1,this._callbacks={progress:{},seeded:{}},this._callbackI=0,this._NOT_READY=0,this._READY=1,this._REQUIRES_RESEED=2,this._MAX_WORDS_PER_BURST=65536,this._PARANOIA_LEVELS=[0,48,64,96,128,192,256,384,512,768,1024],this._MILLISECONDS_PER_RESEED=3e4,this._BITS_PER_RESEED=80},r.prng.prototype={randomWords:function(t,e){var i,n,s=[],o=this.isReady(e);if(o===this._NOT_READY)throw new r.exception.notReady("generator isn't seeded");for(o&this._REQUIRES_RESEED&&this._reseedFromPools(!(o&this._READY)),i=0;t>i;i+=4)0===(i+1)%this._MAX_WORDS_PER_BURST&&this._gate(),n=this._gen4words(),s.push(n[0],n[1],n[2],n[3]);return this._gate(),s.slice(0,t)},setDefaultParanoia:function(t){this._defaultParanoia=t},addEntropy:function(t,e,i){i=i||"user";var n,s,o,a=(new Date).valueOf(),c=this._robins[i],u=this.isReady(),h=0;switch(n=this._collectorIds[i],void 0===n&&(n=this._collectorIds[i]=this._collectorIdNext++),void 0===c&&(c=this._robins[i]=0),this._robins[i]=(this._robins[i]+1)%this._pools.length,typeof t){case"number":void 0===e&&(e=1),this._pools[c].update([n,this._eventId++,1,e,a,1,0|t]);break;case"object":var f=Object.prototype.toString.call(t);if("[object Uint32Array]"===f){for(o=[],s=0;s<t.length;s++)o.push(t[s]);t=o}else for("[object Array]"!==f&&(h=1),s=0;s<t.length&&!h;s++)"number"!=typeof t[s]&&(h=1);if(!h){if(void 0===e)for(e=0,s=0;s<t.length;s++)for(o=t[s];o>0;)e++,o>>>=1;this._pools[c].update([n,this._eventId++,2,e,a,t.length].concat(t))}break;case"string":void 0===e&&(e=t.length),this._pools[c].update([n,this._eventId++,3,e,a,t.length]),this._pools[c].update(t);break;default:h=1}if(h)throw new r.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[c]+=e,this._poolStrength+=e,u===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(t){var e=this._PARANOIA_LEVELS[void 0!==t?t:this._defaultParanoia];return this._strength&&this._strength>=e?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=e?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(t){var e=this._PARANOIA_LEVELS[t?t:this._defaultParanoia];return this._strength>=e?1:this._poolStrength>e?1:this._poolStrength/e},startCollectors:function(){if(!this._collectorsStarted){if(window.addEventListener)window.addEventListener("load",this._loadTimeCollector,!1),window.addEventListener("mousemove",this._mouseCollector,!1);else{if(!document.attachEvent)throw new r.exception.bug("can't attach event");document.attachEvent("onload",this._loadTimeCollector),document.attachEvent("onmousemove",this._mouseCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._loadTimeCollector,!1),window.removeEventListener("mousemove",this._mouseCollector,!1)):window.detachEvent&&(window.detachEvent("onload",this._loadTimeCollector),window.detachEvent("onmousemove",this._mouseCollector)),this._collectorsStarted=!1)},addEventListener:function(t,e){this._callbacks[t][this._callbackI++]=e},removeEventListener:function(t,e){var r,i,n=this._callbacks[t],s=[];for(i in n)n.hasOwnProperty(i)&&n[i]===e&&s.push(i);for(r=0;r<s.length;r++)i=s[r],delete n[i]},_gen4words:function(){for(var t=0;4>t&&(this._counter[t]=0|this._counter[t]+1,!this._counter[t]);t++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new r.cipher.aes(this._key)},_reseed:function(t){this._key=r.hash.sha256.hash(this._key.concat(t)),this._cipher=new r.cipher.aes(this._key);for(var e=0;4>e&&(this._counter[e]=0|this._counter[e]+1,!this._counter[e]);e++);},_reseedFromPools:function(t){var e,i=[],n=0;for(this._nextReseed=i[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,e=0;16>e;e++)i.push(0|4294967296*Math.random());for(e=0;e<this._pools.length&&(i=i.concat(this._pools[e].finalize()),n+=this._poolEntropy[e],this._poolEntropy[e]=0,t||!(this._reseedCount&1<<e));e++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new r.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=n,n>this._strength&&(this._strength=n),this._reseedCount++,this._reseed(i)},_mouseCollector:function(t){var e=t.x||t.clientX||t.offsetX||0,i=t.y||t.clientY||t.offsetY||0;r.random.addEntropy([e,i],2,"mouse")},_loadTimeCollector:function(){r.random.addEntropy((new Date).valueOf(),2,"loadtime")},_fireEvent:function(t,e){var i,n=r.random._callbacks[t],s=[];for(i in n)n.hasOwnProperty(i)&&s.push(n[i]);for(i=0;i<s.length;i++)s[i](e)}},r.random=new r.prng(6),function(){try{var t=new Uint32Array(32);crypto.getRandomValues(t),r.random.addEntropy(t,1024,"crypto.getRandomValues")}catch(e){}}(),r.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},encrypt:function(t,e,i,n){i=i||{},n=n||{};var s,o,a,c=r.json,u=c._add({iv:r.random.randomWords(4,0)},c.defaults);if(c._add(u,i),a=u.adata,"string"==typeof u.salt&&(u.salt=r.codec.base64.toBits(u.salt)),"string"==typeof u.iv&&(u.iv=r.codec.base64.toBits(u.iv)),!r.mode[u.mode]||!r.cipher[u.cipher]||"string"==typeof t&&u.iter<=100||64!==u.ts&&96!==u.ts&&128!==u.ts||128!==u.ks&&192!==u.ks&&256!==u.ks||u.iv.length<2||u.iv.length>4)throw new r.exception.invalid("json encrypt: invalid parameters");return"string"==typeof t?(s=r.misc.cachedPbkdf2(t,u),t=s.key.slice(0,u.ks/32),u.salt=s.salt):r.ecc&&t instanceof r.ecc.elGamal.publicKey&&(s=t.kem(),u.kemtag=s.tag,t=s.key.slice(0,u.ks/32)),"string"==typeof e&&(e=r.codec.utf8String.toBits(e)),"string"==typeof a&&(a=r.codec.utf8String.toBits(a)),o=new r.cipher[u.cipher](t),c._add(n,u),n.key=t,u.ct=r.mode[u.mode].encrypt(o,e,u.iv,a,u.ts),c.encode(u)},decrypt:function(t,e,i,n){i=i||{},n=n||{};var s,o,a,c=r.json,u=c._add(c._add(c._add({},c.defaults),c.decode(e)),i,!0),h=u.adata;if("string"==typeof u.salt&&(u.salt=r.codec.base64.toBits(u.salt)),"string"==typeof u.iv&&(u.iv=r.codec.base64.toBits(u.iv)),!r.mode[u.mode]||!r.cipher[u.cipher]||"string"==typeof t&&u.iter<=100||64!==u.ts&&96!==u.ts&&128!==u.ts||128!==u.ks&&192!==u.ks&&256!==u.ks||!u.iv||u.iv.length<2||u.iv.length>4)throw new r.exception.invalid("json decrypt: invalid parameters");return"string"==typeof t?(o=r.misc.cachedPbkdf2(t,u),t=o.key.slice(0,u.ks/32),u.salt=o.salt):r.ecc&&t instanceof r.ecc.elGamal.secretKey&&(t=t.unkem(r.codec.base64.toBits(u.kemtag)).slice(0,u.ks/32)),"string"==typeof h&&(h=r.codec.utf8String.toBits(h)),a=new r.cipher[u.cipher](t),s=r.mode[u.mode].decrypt(a,u.ct,u.iv,h,u.ts),c._add(n,u),n.key=t,r.codec.utf8String.fromBits(s)},encode:function(t){var e,i="{",n="";for(e in t)if(t.hasOwnProperty(e)){if(!e.match(/^[a-z0-9]+$/i))throw new r.exception.invalid("json encode: invalid property name");switch(i+=n+'"'+e+'":',n=",",typeof t[e]){case"number":case"boolean":i+=t[e];break;case"string":i+='"'+escape(t[e])+'"';break;case"object":i+='"'+r.codec.base64.fromBits(t[e],0)+'"';break;default:throw new r.exception.bug("json encode: unsupported type")}}return i+"}"},decode:function(t){if(t=t.replace(/\s/g,""),!t.match(/^\{.*\}$/))throw new r.exception.invalid("json decode: this isn't json!");var e,i,n=t.replace(/^\{|\}$/g,"").split(/,/),s={};for(e=0;e<n.length;e++){if(!(i=n[e].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i)))throw new r.exception.invalid("json decode: this isn't json!");s[i[2]]=i[3]?parseInt(i[3],10):i[2].match(/^(ct|salt|iv)$/)?r.codec.base64.toBits(i[4]):unescape(i[4])}return s},_add:function(t,e,i){if(void 0===t&&(t={}),void 0===e)return t;var n;for(n in e)if(e.hasOwnProperty(n)){if(i&&void 0!==t[n]&&t[n]!==e[n])throw new r.exception.invalid("required parameter overridden");t[n]=e[n]}return t},_subtract:function(t,e){var r,i={};for(r in t)t.hasOwnProperty(r)&&t[r]!==e[r]&&(i[r]=t[r]);return i},_filter:function(t,e){var r,i={};for(r=0;r<e.length;r++)void 0!==t[e[r]]&&(i[e[r]]=t[e[r]]);return i}},r.encrypt=r.json.encrypt,r.decrypt=r.json.decrypt,r.misc._pbkdf2Cache={},r.misc.cachedPbkdf2=function(t,e){var i,n,s,o,a=r.misc._pbkdf2Cache;return e=e||{},o=e.iter||1e3,n=a[t]=a[t]||{},i=n[o]=n[o]||{firstSalt:e.salt&&e.salt.length?e.salt.slice(0):r.random.randomWords(2,0)},s=void 0===e.salt?i.firstSalt:e.salt,i[s]=i[s]||r.misc.pbkdf2(t,s,e.iter),{key:i[s].slice(0),salt:s.slice(0)}},r.bn=function(t){this.initWith(t)},r.bn.prototype={radix:24,maxMul:8,_class:r.bn,copy:function(){return new this._class(this)},initWith:function(t){var e,r=0;switch(typeof t){case"object":this.limbs=t.limbs.slice(0);break;case"number":this.limbs=[t],this.normalize();break;case"string":for(t=t.replace(/^0x/,""),this.limbs=[],e=this.radix/4,r=0;r<t.length;r+=e)this.limbs.push(parseInt(t.substring(Math.max(t.length-r-e,0),t.length-r),16));break;default:this.limbs=[0]}return this},equals:function(t){"number"==typeof t&&(t=new this._class(t));var e,r=0;for(this.fullReduce(),t.fullReduce(),e=0;e<this.limbs.length||e<t.limbs.length;e++)r|=this.getLimb(e)^t.getLimb(e);return 0===r},getLimb:function(t){return t>=this.limbs.length?0:this.limbs[t]},greaterEquals:function(t){"number"==typeof t&&(t=new this._class(t));var e,r,i,n=0,s=0;for(e=Math.max(this.limbs.length,t.limbs.length)-1;e>=0;e--)r=this.getLimb(e),i=t.getLimb(e),s|=i-r&~n,n|=r-i&~s;return(s|~n)>>>31},toString:function(){this.fullReduce();var t,e,r="",i=this.limbs;for(t=0;t<this.limbs.length;t++){for(e=i[t].toString(16);t<this.limbs.length-1&&e.length<6;)e="0"+e;r=e+r}return"0x"+r},addM:function(t){"object"!=typeof t&&(t=new this._class(t));var e,r=this.limbs,i=t.limbs;for(e=r.length;e<i.length;e++)r[e]=0;for(e=0;e<i.length;e++)r[e]+=i[e];return this},doubleM:function(){var t,e,r=0,i=this.radix,n=this.radixMask,s=this.limbs;for(t=0;t<s.length;t++)e=s[t],e=e+e+r,s[t]=e&n,r=e>>i;return r&&s.push(r),this},halveM:function(){var t,e,r=0,i=this.radix,n=this.limbs;for(t=n.length-1;t>=0;t--)e=n[t],n[t]=e+r>>1,r=(1&e)<<i;return n[n.length-1]||n.pop(),this},subM:function(t){"object"!=typeof t&&(t=new this._class(t));var e,r=this.limbs,i=t.limbs;for(e=r.length;e<i.length;e++)r[e]=0;for(e=0;e<i.length;e++)r[e]-=i[e];return this},mod:function(t){var e=!this.greaterEquals(new r.bn(0));t=new r.bn(t).normalize();var i=new r.bn(this).normalize(),n=0;for(e&&(i=new r.bn(0).subM(i).normalize());i.greaterEquals(t);n++)t.doubleM();for(e&&(i=t.sub(i).normalize());n>0;n--)t.halveM(),i.greaterEquals(t)&&i.subM(t).normalize();return i.trim()},inverseMod:function(t){var e,i,n=new r.bn(1),s=new r.bn(0),o=new r.bn(this),a=new r.bn(t),c=1;if(!(1&t.limbs[0]))throw new r.exception.invalid("inverseMod: p must be odd");do for(1&o.limbs[0]&&(o.greaterEquals(a)||(e=o,o=a,a=e,e=n,n=s,s=e),o.subM(a),o.normalize(),n.greaterEquals(s)||n.addM(t),n.subM(s)),o.halveM(),1&n.limbs[0]&&n.addM(t),n.normalize(),n.halveM(),i=c=0;i<o.limbs.length;i++)c|=o.limbs[i];while(c);if(!a.equals(1))throw new r.exception.invalid("inverseMod: p and x must be relatively prime");return s},add:function(t){return this.copy().addM(t)},sub:function(t){return this.copy().subM(t)},mul:function(t){"number"==typeof t&&(t=new this._class(t));var e,r,i,n=this.limbs,s=t.limbs,o=n.length,a=s.length,c=new this._class,u=c.limbs,h=this.maxMul;for(e=0;e<this.limbs.length+t.limbs.length+1;e++)u[e]=0;for(e=0;o>e;e++){for(i=n[e],r=0;a>r;r++)u[e+r]+=i*s[r];--h||(h=this.maxMul,c.cnormalize())}return c.cnormalize().reduce()},square:function(){return this.mul(this)},power:function(t){"number"==typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs);var e,r,i=new this._class(1),n=this;for(e=0;e<t.length;e++)for(r=0;r<this.radix;r++)t[e]&1<<r&&(i=i.mul(n)),n=n.square();return i},mulmod:function(t,e){return this.mod(e).mul(t.mod(e)).mod(e)},powermod:function(t,e){for(var i=new r.bn(1),n=new r.bn(this),s=new r.bn(t);;){if(1&s.limbs[0]&&(i=i.mulmod(n,e)),s.halveM(),s.equals(0))break;n=n.mulmod(n,e)}return i.normalize().reduce()},trim:function(){var t,e=this.limbs;do t=e.pop();while(e.length&&0===t);return e.push(t),this},reduce:function(){return this},fullReduce:function(){return this.normalize()},normalize:function(){var t,e,r,i=0,n=(this.placeVal,this.ipv),s=this.limbs,o=s.length,a=this.radixMask;for(t=0;o>t||0!==i&&-1!==i;t++)e=(s[t]||0)+i,r=s[t]=e&a,i=(e-r)*n;return-1===i&&(s[t-1]-=this.placeVal),this},cnormalize:function(){var t,e,r,i=0,n=this.ipv,s=this.limbs,o=s.length,a=this.radixMask;for(t=0;o-1>t;t++)e=s[t]+i,r=s[t]=e&a,i=(e-r)*n;return s[t]+=i,this},toBits:function(t){this.fullReduce(),t=t||this.exponent||this.bitLength();var e=Math.floor((t-1)/24),i=r.bitArray,n=(-8&t+7)%this.radix||this.radix,s=[i.partial(n,this.getLimb(e))];for(e--;e>=0;e--)s=i.concat(s,[i.partial(Math.min(this.radix,t),this.getLimb(e))]),t-=this.radix;return s},bitLength:function(){this.fullReduce();for(var t=this.radix*(this.limbs.length-1),e=this.limbs[this.limbs.length-1];e;e>>>=1)t++;return-8&t+7}},r.bn.fromBits=function(t){var e=this,i=new e,n=[],s=r.bitArray,o=this.prototype,a=Math.min(this.bitLength||4294967296,s.bitLength(t)),c=a%o.radix||o.radix;for(n[0]=s.extract(t,0,c);a>c;c+=o.radix)n.unshift(s.extract(t,c,o.radix));return i.limbs=n,i},r.bn.prototype.ipv=1/(r.bn.prototype.placeVal=Math.pow(2,r.bn.prototype.radix)),r.bn.prototype.radixMask=(1<<r.bn.prototype.radix)-1,r.bn.pseudoMersennePrime=function(t,e){function i(t){this.initWith(t)}var n,s,o,a=i.prototype=new r.bn;for(o=a.modOffset=Math.ceil(s=t/a.radix),a.exponent=t,a.offset=[],a.factor=[],a.minOffset=o,a.fullMask=0,a.fullOffset=[],a.fullFactor=[],a.modulus=i.modulus=new r.bn(Math.pow(2,t)),a.fullMask=0|-Math.pow(2,t%a.radix),n=0;n<e.length;n++)a.offset[n]=Math.floor(e[n][0]/a.radix-s),a.fullOffset[n]=Math.ceil(e[n][0]/a.radix-s),a.factor[n]=e[n][1]*Math.pow(.5,t-e[n][0]+a.offset[n]*a.radix),a.fullFactor[n]=e[n][1]*Math.pow(.5,t-e[n][0]+a.fullOffset[n]*a.radix),a.modulus.addM(new r.bn(Math.pow(2,e[n][0])*e[n][1])),a.minOffset=Math.min(a.minOffset,-a.offset[n]);return a._class=i,a.modulus.cnormalize(),a.reduce=function(){var t,e,r,i,n=this.modOffset,s=this.limbs,o=this.offset,a=this.offset.length,c=this.factor;for(t=this.minOffset;s.length>n;){for(r=s.pop(),i=s.length,e=0;a>e;e++)s[i+o[e]]-=c[e]*r;t--,t||(s.push(0),this.cnormalize(),t=this.minOffset)}return this.cnormalize(),this},a._strongReduce=-1===a.fullMask?a.reduce:function(){var t,e,r=this.limbs,i=r.length-1;if(this.reduce(),i===this.modOffset-1){for(e=r[i]&this.fullMask,r[i]-=e,t=0;t<this.fullOffset.length;t++)r[i+this.fullOffset[t]]-=this.fullFactor[t]*e;this.normalize()}},a.fullReduce=function(){var t,e;for(this._strongReduce(),this.addM(this.modulus),this.addM(this.modulus),this.normalize(),this._strongReduce(),e=this.limbs.length;e<this.modOffset;e++)this.limbs[e]=0;for(t=this.greaterEquals(this.modulus),e=0;e<this.limbs.length;e++)this.limbs[e]-=this.modulus.limbs[e]*t;return this.cnormalize(),this},a.inverse=function(){return this.power(this.modulus.sub(2))},i.fromBits=r.bn.fromBits,i},r.bn.prime={p127:r.bn.pseudoMersennePrime(127,[[0,-1]]),p25519:r.bn.pseudoMersennePrime(255,[[0,-19]]),p192:r.bn.pseudoMersennePrime(192,[[0,-1],[64,-1]]),p224:r.bn.pseudoMersennePrime(224,[[0,1],[96,-1]]),p256:r.bn.pseudoMersennePrime(256,[[0,-1],[96,1],[192,1],[224,-1]]),p384:r.bn.pseudoMersennePrime(384,[[0,-1],[32,1],[96,-1],[128,-1]]),p521:r.bn.pseudoMersennePrime(521,[[0,-1]])},r.bn.random=function(t,e){"object"!=typeof t&&(t=new r.bn(t));for(var i,n,s=t.limbs.length,o=t.limbs[s-1]+1,a=new r.bn;;){do i=r.random.randomWords(s,e),i[s-1]<0&&(i[s-1]+=4294967296);while(Math.floor(i[s-1]/o)===Math.floor(4294967296/o));for(i[s-1]%=o,n=0;s-1>n;n++)i[n]&=t.radixMask;if(a.limbs=i,!a.greaterEquals(t))return a}},r.ecc={},r.ecc.point=function(t,e,r){void 0===e?this.isIdentity=!0:(this.x=e,this.y=r,this.isIdentity=!1),this.curve=t},r.ecc.point.prototype={toJac:function(){return new r.ecc.pointJac(this.curve,this.x,this.y,new this.curve.field(1))},mult:function(t){return this.toJac().mult(t,this).toAffine()},mult2:function(t,e,r){return this.toJac().mult2(t,this,e,r).toAffine()},multiples:function(){var t,e,i;if(void 0===this._multiples)for(i=this.toJac().doubl(),t=this._multiples=[new r.ecc.point(this.curve),this,i.toAffine()],e=3;16>e;e++)i=i.add(this),t.push(i.toAffine());return this._multiples},isValid:function(){return this.y.square().equals(this.curve.b.add(this.x.mul(this.curve.a.add(this.x.square()))))},toBits:function(){return r.bitArray.concat(this.x.toBits(),this.y.toBits())}},r.ecc.pointJac=function(t,e,r,i){void 0===e?this.isIdentity=!0:(this.x=e,this.y=r,this.z=i,this.isIdentity=!1),this.curve=t},r.ecc.pointJac.prototype={add:function(t){var e,i,n,s,o,a,c,u,h,f,_,l=this;if(l.curve!==t.curve)throw"sjcl.ecc.add(): Points must be on the same curve to add them!";return l.isIdentity?t.toJac():t.isIdentity?l:(e=l.z.square(),i=t.x.mul(e).subM(l.x),i.equals(0)?l.y.equals(t.y.mul(e.mul(l.z)))?l.doubl():new r.ecc.pointJac(l.curve):(n=t.y.mul(e.mul(l.z)).subM(l.y),s=i.square(),o=n.square(),a=i.square().mul(i).addM(l.x.add(l.x).mul(s)),c=o.subM(a),u=l.x.mul(s).subM(c).mul(n),h=l.y.mul(i.square().mul(i)),f=u.subM(h),_=l.z.mul(i),new r.ecc.pointJac(this.curve,c,f,_)))},doubl:function(){if(this.isIdentity)return this;var t=this.y.square(),e=t.mul(this.x.mul(4)),i=t.square().mul(8),n=this.z.square(),s=this.x.sub(n).mul(3).mul(this.x.add(n)),o=s.square().subM(e).subM(e),a=e.sub(o).mul(s).subM(i),c=this.y.add(this.y).mul(this.z);return new r.ecc.pointJac(this.curve,o,a,c)},toAffine:function(){if(this.isIdentity||this.z.equals(0))return new r.ecc.point(this.curve);var t=this.z.inverse(),e=t.square();return new r.ecc.point(this.curve,this.x.mul(e).fullReduce(),this.y.mul(e.mul(t)).fullReduce())},mult:function(t,e){"number"==typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs);var i,n,s=new r.ecc.point(this.curve).toJac(),o=e.multiples();for(i=t.length-1;i>=0;i--)for(n=r.bn.prototype.radix-4;n>=0;n-=4)s=s.doubl().doubl().doubl().doubl().add(o[15&t[i]>>n]);return s},mult2:function(t,e,i,n){"number"==typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs),"number"==typeof i?i=[i]:void 0!==i.limbs&&(i=i.normalize().limbs);var s,o,a,c,u=new r.ecc.point(this.curve).toJac(),h=e.multiples(),f=n.multiples();for(s=Math.max(t.length,i.length)-1;s>=0;s--)for(a=0|t[s],c=0|i[s],o=r.bn.prototype.radix-4;o>=0;o-=4)u=u.doubl().doubl().doubl().doubl().add(h[15&a>>o]).add(f[15&c>>o]);return u},isValid:function(){var t=this.z.square(),e=t.square(),r=e.mul(t);return this.y.square().equals(this.curve.b.mul(r).add(this.x.mul(this.curve.a.mul(e).add(this.x.square()))))}},r.ecc.curve=function(t,e,i,n,s,o){this.field=t,this.r=t.prototype.modulus.sub(e),this.a=new t(i),this.b=new t(n),this.G=new r.ecc.point(this,new t(s),new t(o))},r.ecc.curve.prototype.fromBits=function(t){var e=r.bitArray,i=-8&this.field.prototype.exponent+7,n=new r.ecc.point(this,this.field.fromBits(e.bitSlice(t,0,i)),this.field.fromBits(e.bitSlice(t,i,2*i)));if(!n.isValid())throw new r.exception.corrupt("not on the curve!");return n},r.ecc.curves={c192:new r.ecc.curve(r.bn.prime.p192,"0x662107c8eb94364e4b2dd7ce",-3,"0x64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1","0x188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012","0x07192b95ffc8da78631011ed6b24cdd573f977a11e794811"),c224:new r.ecc.curve(r.bn.prime.p224,"0xe95c1f470fc1ec22d6baa3a3d5c4",-3,"0xb4050a850c04b3abf54132565044b0b7d7bfd8ba270b39432355ffb4","0xb70e0cbd6bb4bf7f321390b94a03c1d356c21122343280d6115c1d21","0xbd376388b5f723fb4c22dfe6cd4375a05a07476444d5819985007e34"),c256:new r.ecc.curve(r.bn.prime.p256,"0x4319055358e8617b0c46353d039cdaae",-3,"0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b","0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296","0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),c384:new r.ecc.curve(r.bn.prime.p384,"0x389cb27e0bc8d21fa7e5f24cb74f58851313e696333ad68c",-3,"0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef","0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7","0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},r.ecc._dh=function(t){r.ecc[t]={publicKey:function(t,e){this._curve=t,this._curveBitLength=t.r.bitLength(),this._point=e instanceof Array?t.fromBits(e):e,this.get=function(){var t=this._point.toBits(),e=r.bitArray.bitLength(t),i=r.bitArray.bitSlice(t,0,e/2),n=r.bitArray.bitSlice(t,e/2);return{x:i,y:n}}},secretKey:function(t,e){this._curve=t,this._curveBitLength=t.r.bitLength(),this._exponent=e,this.get=function(){return this._exponent.toBits()}},generateKeys:function(e,i,n){if(void 0===e&&(e=256),"number"==typeof e&&(e=r.ecc.curves["c"+e],void 0===e))throw new r.exception.invalid("no such curve");if(void 0===n)var n=r.bn.random(e.r,i);var s=e.G.mult(n);return{pub:new r.ecc[t].publicKey(e,s),sec:new r.ecc[t].secretKey(e,n)}}}},r.ecc._dh("elGamal"),r.ecc.elGamal.publicKey.prototype={kem:function(t){var e=r.bn.random(this._curve.r,t),i=this._curve.G.mult(e).toBits(),n=r.hash.sha256.hash(this._point.mult(e).toBits());return{key:n,tag:i}}},r.ecc.elGamal.secretKey.prototype={unkem:function(t){return r.hash.sha256.hash(this._curve.fromBits(t).mult(this._exponent).toBits())},dh:function(t){return r.hash.sha256.hash(t._point.mult(this._exponent).toBits())}},r.ecc._dh("ecdsa"),r.ecc.ecdsa.secretKey.prototype={sign:function(t,e,i,n){r.bitArray.bitLength(t)>this._curveBitLength&&(t=r.bitArray.clamp(t,this._curveBitLength));var s=this._curve.r,o=s.bitLength(),a=n||r.bn.random(s.sub(1),e).add(1),c=this._curve.G.mult(a).x.mod(s),u=r.bn.fromBits(t).add(c.mul(this._exponent)),h=i?u.inverseMod(s).mul(a).mod(s):u.mul(a.inverseMod(s)).mod(s);return r.bitArray.concat(c.toBits(o),h.toBits(o))}},r.ecc.ecdsa.publicKey.prototype={verify:function(t,e,i){r.bitArray.bitLength(t)>this._curveBitLength&&(t=r.bitArray.clamp(t,this._curveBitLength));var n=r.bitArray,s=this._curve.r,o=this._curveBitLength,a=r.bn.fromBits(n.bitSlice(e,0,o)),c=r.bn.fromBits(n.bitSlice(e,o,2*o)),u=i?c:c.inverseMod(s),h=r.bn.fromBits(t).mul(u).mod(s),f=a.mul(u).mod(s),_=this._curve.G.mult2(h,f,this._point).x;if(a.equals(0)||c.equals(0)||a.greaterEquals(s)||c.greaterEquals(s)||!_.equals(a)){if(void 0===i)return this.verify(t,e,!0);throw new r.exception.corrupt("signature didn't check out")}return!0}},r.keyexchange.srp={makeVerifier:function(t,e,i,n){var s;return s=r.keyexchange.srp.makeX(t,e,i),s=r.bn.fromBits(s),n.g.powermod(s,n.N)},makeX:function(t,e,i){var n=r.hash.sha1.hash(t+":"+e);return r.hash.sha1.hash(r.bitArray.concat(i,n))},knownGroup:function(t){return"string"!=typeof t&&(t=t.toString()),r.keyexchange.srp._didInitKnownGroups||r.keyexchange.srp._initKnownGroups(),r.keyexchange.srp._knownGroups[t]},_didInitKnownGroups:!1,_initKnownGroups:function(){var t,e,i;for(t=0;t<r.keyexchange.srp._knownGroupSizes.length;t++)e=r.keyexchange.srp._knownGroupSizes[t].toString(),i=r.keyexchange.srp._knownGroups[e],i.N=new r.bn(i.N),i.g=new r.bn(i.g);r.keyexchange.srp._didInitKnownGroups=!0},_knownGroupSizes:[1024,1536,2048],_knownGroups:{1024:{N:"EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",g:2},1536:{N:"9DEF3CAFB939277AB1F12A8617A47BBBDBA51DF499AC4C80BEEEA9614B19CC4D5F4F5F556E27CBDE51C6A94BE4607A291558903BA0D0F84380B655BB9A22E8DCDF028A7CEC67F0D08134B1C8B97989149B609E0BE3BAB63D47548381DBC5B1FC764E3F4B53DD9DA1158BFD3E2B9C8CF56EDF019539349627DB2FD53D24B7C48665772E437D6C7F8CE442734AF7CCB7AE837C264AE3A9BEB87F8A2FE9B8B5292E5A021FFF5E91479E8CE7A28C2442C6F315180F93499A234DCF76E3FED135F9BB",g:2},2048:{N:"AC6BDB41324A9A9BF166DE5E1389582FAF72B6651987EE07FC3192943DB56050A37329CBB4A099ED8193E0757767A13DD52312AB4B03310DCD7F48A9DA04FD50E8083969EDB767B0CF6095179A163AB3661A05FBD5FAAAE82918A9962F0B93B855F97993EC975EEAA80D740ADBF4FF747359D041D5C33EA71D281E446B14773BCA97B43A23FB801676BD207A436C6481F1D2B9078717461A5B9D32E688F87748544523B524B0D57D5EA77A2775D2ECFA032CFBDBF52FB3786160279004E57AE6AF874E7303CE53299CCC041C7BC308D82A5698F3A8D0C38271AE35F8E9DBFBB694B5C803D89F7AE435DE236D525F54759B65E372FCD68EF20FA7111F9E4AFF73",g:2}}},r.ecc.curves.c256=new r.ecc.curve(r.bn.pseudoMersennePrime(256,[[0,-1],[4,-1],[6,-1],[7,-1],[8,-1],[9,-1],[32,-1]]),"0x14551231950b75fc4402da1722fc9baee",0,7,"0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),r.ecc.pointJac.prototype.add=function(t){var e=this;if(e.curve!==t.curve)throw"sjcl.ecc.add(): Points must be on the same curve to add them!";if(e.isIdentity)return t.toJac();if(t.isIdentity)return e;var i=e.z.square(),n=t.x.mul(i).subM(e.x),s=t.y.mul(e.z).mul(i);if(n.equals(0))return e.y.equals(t.y.mul(i.mul(e.z)))?e.doubl():new r.ecc.pointJac(e.curve);var o=n.square(),a=o.copy().doubleM().doubleM(),c=n.mul(a),u=s.sub(e.y).doubleM(),h=e.x.mul(a),f=u.square().subM(c).subM(h.copy().doubleM()),_=u.mul(h.sub(f)).subM(e.y.mul(c).doubleM()),l=e.z.add(n).square().subM(i).subM(o);return new r.ecc.pointJac(this.curve,f,_,l)},r.ecc.pointJac.prototype.doubl=function(){if(this.isIdentity)return this;var t=this.x.square(),e=this.y.square(),i=e.square(),n=this.x.add(e).square().subM(t).subM(i).doubleM(),s=t.mul(3),o=s.square(),a=o.sub(n.copy().doubleM()),c=s.mul(n.sub(a)).subM(i.doubleM().doubleM().doubleM()),u=this.y.mul(this.z).doubleM();return new r.ecc.pointJac(this.curve,a,c,u)},r.ecc.point.prototype.toBytesCompressed=function(){var t="0x0"==this.y.mod(2).toString()?2:3;return[t].concat(r.codec.bytes.fromBits(this.x.toBits()))},function(){function t(t,e,r){return t^e^r}function e(t,e,r){return t&e|~t&r}function i(t,e,r){return(t|~e)^r}function n(t,e,r){return t&r|e&~r}function s(t,e,r){return t^(e|~r)}function o(t,e){return t<<e|t>>>32-e}function a(t){return(255&t)<<24|(65280&t)<<8|(t&255<<16)>>>8|(t&255<<24)>>>24}function c(r){for(var a,c=this._h[0],u=this._h[1],_=this._h[2],l=this._h[3],y=this._h[4],g=this._h[0],b=this._h[1],w=this._h[2],x=this._h[3],E=this._h[4],A=0;16>A;++A)a=o(c+t(u,_,l)+r[p[A]]+h[A],v[A])+y,c=y,y=l,l=o(_,10),_=u,u=a,a=o(g+s(b,w,x)+r[d[A]]+f[A],m[A])+E,g=E,E=x,x=o(w,10),w=b,b=a;for(;32>A;++A)a=o(c+e(u,_,l)+r[p[A]]+h[A],v[A])+y,c=y,y=l,l=o(_,10),_=u,u=a,a=o(g+n(b,w,x)+r[d[A]]+f[A],m[A])+E,g=E,E=x,x=o(w,10),w=b,b=a;for(;48>A;++A)a=o(c+i(u,_,l)+r[p[A]]+h[A],v[A])+y,c=y,y=l,l=o(_,10),_=u,u=a,a=o(g+i(b,w,x)+r[d[A]]+f[A],m[A])+E,g=E,E=x,x=o(w,10),w=b,b=a;for(;64>A;++A)a=o(c+n(u,_,l)+r[p[A]]+h[A],v[A])+y,c=y,y=l,l=o(_,10),_=u,u=a,a=o(g+e(b,w,x)+r[d[A]]+f[A],m[A])+E,g=E,E=x,x=o(w,10),w=b,b=a;for(;80>A;++A)a=o(c+s(u,_,l)+r[p[A]]+h[A],v[A])+y,c=y,y=l,l=o(_,10),_=u,u=a,a=o(g+t(b,w,x)+r[d[A]]+f[A],m[A])+E,g=E,E=x,x=o(w,10),w=b,b=a;a=this._h[1]+_+x,this._h[1]=this._h[2]+l+E,this._h[2]=this._h[3]+y+g,this._h[3]=this._h[4]+c+b,this._h[4]=this._h[0]+u+w,this._h[0]=a}r.hash.ripemd160=function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},r.hash.ripemd160.hash=function(t){return(new r.hash.ripemd160).update(t).finalize()},r.hash.ripemd160.prototype={reset:function(){return this._h=u.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=r.codec.utf8String.toBits(t));var e,i=this._buffer=r.bitArray.concat(this._buffer,t),n=this._length,s=this._length=n+r.bitArray.bitLength(t);for(e=-512&512+n;s>=e;e+=512){for(var o=i.splice(0,16),u=0;16>u;++u)o[u]=a(o[u]);c.call(this,o)}return this},finalize:function(){var t=r.bitArray.concat(this._buffer,[r.bitArray.partial(1,1)]),e=(this._length+1)%512,i=(e>448?512:448)-e%448,n=i%32;for(n>0&&(t=r.bitArray.concat(t,[r.bitArray.partial(n,0)]));i>=32;i-=32)t.push(0);for(t.push(a(0|this._length)),t.push(a(Math.floor(this._length/4294967296)));t.length;){for(var s=t.splice(0,16),o=0;16>o;++o)s[o]=a(s[o]);c.call(this,s)}var u=this._h;this.reset();for(var o=0;5>o;++o)u[o]=a(u[o]);return u}};for(var u=[1732584193,4023233417,2562383102,271733878,3285377520],h=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0],_=4;_>=0;--_)for(var l=1;16>l;++l)h.splice(_,0,h[_]),f.splice(_,0,f[_]);var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}(),r.bn.ZERO=new r.bn(0),r.bn.prototype.divRem=function(t){"object"!=typeof t&&(t=new this._class(t));var e=this.abs(),r=t.abs(),i=new this._class(0),n=0;if(!e.greaterEquals(r))return this.initWith(0),this;if(e.equals(r))return this.initWith(1),this;for(;e.greaterEquals(r);n++)r.doubleM();for(;n>0;n--)i.doubleM(),r.halveM(),e.greaterEquals(r)&&(i.addM(1),e.subM(t).normalize());return[i,e]},r.bn.prototype.divRound=function(t){var e=this.divRem(t),r=e[0],i=e[1];return i.doubleM().greaterEquals(t)&&r.addM(1),r},r.bn.prototype.div=function(t){var e=this.divRem(t);return e[0]},r.bn.prototype.sign=function(){return this.greaterEquals(r.bn.ZERO)?1:-1},r.bn.prototype.neg=function(){return r.bn.ZERO.sub(this)},r.bn.prototype.abs=function(){return-1===this.sign()?this.neg():this},r.ecc.ecdsa.secretKey.prototype={sign:function(t,e){var i=this._curve.r,n=i.bitLength(),s=r.bn.random(i.sub(1),e).add(1),o=this._curve.G.mult(s).x.mod(i),a=r.bn.fromBits(t).add(o.mul(this._exponent)).mul(s.inverseMod(i)).mod(i);
return r.bitArray.concat(o.toBits(n),a.toBits(n))}},r.ecc.ecdsa.publicKey.prototype={verify:function(t,e){var i=r.bitArray,n=this._curve.r,s=n.bitLength(),o=r.bn.fromBits(i.bitSlice(e,0,s)),a=r.bn.fromBits(i.bitSlice(e,s,2*s)),c=a.modInverse(n),u=r.bn.fromBits(t).mul(c).mod(n),h=o.mul(c).mod(n),f=this._curve.G.mult2(u,h,this._point).x;if(o.equals(0)||a.equals(0)||o.greaterEquals(n)||a.greaterEquals(n)||!f.equals(o))throw new r.exception.corrupt("signature didn't check out");return!0}},r.ecc.ecdsa.secretKey.prototype.signDER=function(t,e){return this.encodeDER(this.sign(t,e))},r.ecc.ecdsa.secretKey.prototype.encodeDER=function(t){for(var e=r.bitArray,i=this._curve.r,n=i.bitLength(),s=r.codec.bytes.fromBits(e.bitSlice(t,0,n)),o=r.codec.bytes.fromBits(e.bitSlice(t,n,2*n));!s[0]&&s.length;)s.shift();for(;!o[0]&&o.length;)o.shift();128&s[0]&&s.unshift(0),128&o[0]&&o.unshift(0);var a=[].concat(48,4+s.length+o.length,2,s.length,s,2,o.length,o);return r.codec.bytes.toBits(a)}}(r,r(22)(t))},11:function(t,e,r){var i=r(25),n=t.exports={load:function(t){return i(n,t),n}}},12:function(t,e){Function.prototype.method=function(t,e){return this.prototype[t]=e,this};var r=function(t,e){return function(){console.log("%s: %s",r,arguments.toString),e(arguments)}},i=function(t,e){var r,i=new Array(t);for(r=0;t>r;r++)i[r]=e;return i},n=function(t){var e=[],r=0;for(t.length%2&&(e.push(String.fromCharCode(parseInt(t.substring(0,1),16))),r=1);r!=t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substring(r,r+2),16)));return e.join("")},s=function(t){return Array.prototype.map.call(t,function(t){var e=t.charCodeAt(0);return 16>e?"0"+e.toString(16):e.toString(16)}).join("")},o=function(t){var e,r=new Array(t.length);for(e=0;e!=r.length;e+=1)r[e]=t.charCodeAt(e);return r},a=function(t){return o(n(t))},c=function(t,e,r){var i=[],n=0,s=t.length;for(r&&(n=t.length%e,n&&i.push(t.slice(0,n)));s>n;n+=e)i.push(t.slice(n,e+n));return i},u=function(t,e){console.log(t,JSON.stringify(e,void 0,2))},h=function(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:"."))},f=function(t){for(var e={},r=[],i=0,n=t.length;n>i;++i)e.hasOwnProperty(t[i])||(r.push(t[i]),e[t[i]]=1);return r},_=function(t){return 1e3*(t+946684800)};e.trace=r,e.arraySet=i,e.hexToString=n,e.hexToArray=a,e.stringToArray=o,e.stringToHex=s,e.chunkString=c,e.logObject=u,e.assert=h,e.arrayUnique=f,e.toTimestamp=_},13:function(t,e,r){var i=r(23).EventEmitter,n=r(24),s=r(9),o=function(t,e){if(i.call(this),"object"!=typeof e||"string"!=typeof e.url)throw new Error("Invalid server configuration.");var r=this;this._remote=t,this._opts=e,this._ws=void 0,this._connected=!1,this._should_connect=!1,this._state=void 0,this._id=0,this._retry=0,this._requests={},this.on("message",function(t){r._handle_message(t)}),this.on("response_subscribe",function(t){r._handle_response_subscribe(t)})};n.inherits(o,i),o.online_states=["syncing","tracking","proposing","validating","full"],o.prototype._is_online=function(t){return-1!==o.online_states.indexOf(t)},o.prototype._set_state=function(t){t!==this._state&&(this._state=t,this.emit("state",t),"online"===t?(this._connected=!0,this.emit("connect")):"offline"===t&&(this._connected=!1,this.emit("disconnect")))},o.prototype.connect=function(){function t(){e.emit("socket_close"),e._set_state("offline"),n.onopen=n.onerror=n.onclose=n.onmessage=function(){},e._should_connect&&(e._retry+=1,e._retry_timer=setTimeout(function(){e._remote.trace&&console.log("server: retry"),e._should_connect&&e.connect()},e._retry<40?50:e._retry<100?1e3:e._retry<160?1e4:3e4))}var e=this;if(this._connected!==!0){this._remote.trace&&console.log("server: connect: %s",this._opts.url),this._ws&&this._ws.close();var i=r(26),n=this._ws=new i(this._opts.url);this._should_connect=!0,e.emit("connecting"),n.onopen=function(){if(n===e._ws){e.emit("socket_open");var t=e._remote._server_prepare_subscribe();e.request(t)}},n.onerror=function(r){n===e._ws&&(e._remote.trace&&console.log("server: onerror: %s",r.data||r),t())},n.onclose=function(){n===e._ws&&(e._remote.trace&&console.log("server: onclose: %s",n.readyState),t())},n.onmessage=function(t){e.emit("message",t.data)}}},o.prototype.disconnect=function(){this._should_connect=!1,this._set_state("offline"),this._ws&&this._ws.close()},o.prototype.send_message=function(t){this._ws.send(JSON.stringify(t))},o.prototype.request=function(t){var e=this;e._ws?(t.message.id=e._id,e._requests[t.message.id]=t,e._id++,e._connected||"subscribe"===t.message.command&&1===e._ws.readyState?(e._remote.trace&&s.logObject("server: request: %s",t.message),e.send_message(t.message)):e.once("connect",function(){e._remote.trace&&s.logObject("server: request: %s",t.message),e.send_message(t.message)})):e._remote.trace&&s.logObject("server: request: DROPPING: %s",t.message)},o.prototype._handle_message=function(t){var e,r=this;try{e=JSON.parse(t)}catch(i){return}switch(e.type){case"response":var n=r._requests[e.id];delete r._requests[e.id],n?"success"===e.status?(r._remote.trace&&s.logObject("server: response: %s",e),n.emit("success",e.result),[r,r._remote].forEach(function(t){t.emit("response_"+n.message.command,e.result,n,e)})):e.error&&(r._remote.trace&&s.logObject("server: error: %s",e),n.emit("error",{error:"remoteError",error_message:"Remote reported an error.",remote:e})):r._remote.trace&&s.logObject("server: UNEXPECTED: %s",e);break;case"path_find":r._remote.trace&&s.logObject("server: path_find: %s",e);break;case"serverStatus":r._set_state(r._is_online(e.server_status)?"online":"offline")}},o.prototype._handle_response_subscribe=function(t){var e=this;e._server_status=t.server_status,e._is_online(t.server_status)&&e._set_state("online")},e.Server=o},14:function(t,e,r){r(10);var i=r(9),n=r(11),s=r(18),o=r(25),a=s.BigInteger;s.nbi;var c=r(27).UInt,u=r(4).Base,h=o(function(){this._value=0/0},c);h.width=20,h.prototype=o({},c.prototype),h.prototype.constructor=h,h.ACCOUNT_ZERO="rrrrrrrrrrrrrrrrrrrrrhoLvTp",h.ACCOUNT_ONE="rrrrrrrrrrrrrrrrrrrrBZbvji";var f=h.HEX_ZERO="0000000000000000000000000000000000000000",_=h.HEX_ONE="0000000000000000000000000000000000000001";h.STR_ZERO=i.hexToString(f),h.STR_ONE=i.hexToString(_),h.prototype.parse_json=function(t){return n.accounts&&t in n.accounts&&(t=n.accounts[t].account),this._value="number"==typeof t?new a(String(t)):"string"!=typeof t?0/0:"r"===t[0]?u.decode_check(u.VER_ACCOUNT_ID,t):0/0,this},h.prototype.to_json=function(t){if(t=t||{},!(this._value instanceof a))return 0/0;var e=u.encode_check(u.VER_ACCOUNT_ID,this.to_bytes());return t.gateways&&e in t.gateways&&(e=t.gateways[e]),e},e.UInt160=h},15:function(t,e,r){var i=r(23).EventEmitter,n=r(24);r(2).Amount;var s=r(14).UInt160,o=r(25),a=function(t,e){i.call(this);var r=this;return this._remote=t,this._account=s.from_json(e),this._account_id=this._account.to_json(),this._subs=0,this._entry={},this.on("newListener",function(t){-1!==a.subscribe_events.indexOf(t)&&(r._subs||"open"!==r._remote._online_state||r._remote.request_subscribe().accounts(r._account_id).request(),r._subs+=1)}),this.on("removeListener",function(t){-1!==a.subscribe_events.indexOf(t)&&(r._subs-=1,r._subs||"open"!==r._remote._online_state||r._remote.request_unsubscribe().accounts(r._account_id).request())}),this._remote.on("prepare_subscribe",function(t){r._subs&&t.accounts(r._account_id)}),this.on("transaction",function(t){var e=!1;t.mmeta.each(function(t){"AccountRoot"===t.entryType&&t.fields.Account===r._account_id&&(o(r._entry,t.fieldsNew,t.fieldsFinal),e=!0)}),e&&r.emit("entry",r._entry)}),this};n.inherits(a,i),a.subscribe_events=["transaction","entry"],a.prototype.to_json=function(){return this._account.to_json()},a.prototype.is_valid=function(){return this._account.is_valid()},a.prototype.entry=function(t){var e=this;return e._remote.request_account_info(this._account_id).on("success",function(r){o(e._entry,r.account_data),e.emit("entry",e._entry),"function"==typeof t&&t(null,r)}).on("error",function(e){t(e)}).request(),this},a.prototype.lines=function(t){var e=this;return e._remote.request_account_lines(this._account_id).on("success",function(r){e._lines=r.lines,e.emit("lines",e._lines),"function"==typeof t&&t(null,r)}).on("error",function(e){t(e)}).request(),this},a.prototype.notifyTx=function(t){this._subs&&this.emit("transaction",t)},e.Account=a},16:function(t,e,r){var i=r(23).EventEmitter,n=r(24),s=r(2).Amount,o=r(14).UInt160,a=r(3).Currency,c=r(25),u=function(t,e,r,n,s){i.call(this);var o=this;return this._remote=t,this._currency_gets=e,this._issuer_gets=r,this._currency_pays=n,this._issuer_pays=s,this._subs=0,this._sync=!1,this._offers=[],this.on("newListener",function(t){-1!==u.subscribe_events.indexOf(t)&&(o._subs||"open"!==o._remote._online_state||o._subscribe(),o._subs+=1)}),this.on("removeListener",function(t){~u.subscribe_events.indexOf(t)&&(o._subs-=1,!o._subs&&o._remote._connected&&(o._sync=!1,o._remote.request_unsubscribe().books([o.to_json()]).request()))}),this._remote.on("connect",function(){o._subs&&o._subscribe()}),this._remote.on("disconnect",function(){o._sync=!1}),this};n.inherits(u,i),u.subscribe_events=["transaction","model","trade"],u.prototype._subscribe=function(){var t=this;t._remote.request_subscribe().books([t.to_json()],!0).on("error",function(){}).on("success",function(e){t._sync=!0,t._offers=e.offers,t.emit("model",t._offers)}).request()},u.prototype.to_json=function(){var t={taker_gets:{currency:this._currency_gets},taker_pays:{currency:this._currency_pays}};return"XRP"!==this._currency_gets&&(t.taker_gets.issuer=this._issuer_gets),"XRP"!==this._currency_pays&&(t.taker_pays.issuer=this._issuer_pays),t},u.prototype.is_valid=function(){return a.is_valid(this._currency_pays)&&("XRP"===this._currency_pays||o.is_valid(this._issuer_pays))&&a.is_valid(this._currency_gets)&&("XRP"===this._currency_gets||o.is_valid(this._issuer_gets))&&!("XRP"===this._currency_pays&&"XRP"===this._currency_gets)},u.prototype.trade=function(t){var e="";return s.from_json(e)},u.prototype.notifyTx=function(t){var e=this,r=!1,i=this.trade("gets"),n=this.trade("pays");t.mmeta.each(function(o){if("Offer"===o.entryType){var a,u,h;switch(o.diffType){case"DeletedNode":case"ModifiedNode":var f="DeletedNode"===o.diffType;for(a=0,u=e._offers.length;u>a;a++)if(h=e._offers[a],h.index===o.ledgerIndex){f?e._offers.splice(a,1):c(h,o.fieldsFinal),r=!0;break}if("OfferCancel"===t.transaction.TransactionType)return;i=i.add(o.fieldsPrev.TakerGets),n=n.add(o.fieldsPrev.TakerPays),f||(i=i.subtract(o.fieldsFinal.TakerGets),n=n.subtract(o.fieldsFinal.TakerPays));break;case"CreatedNode":var _=s.from_json(o.fields.TakerPays).ratio_human(o.fields.TakerGets);for(a=0,u=e._offers.length;u>a;a++){h=e._offers[a];var l=s.from_json(h.TakerPays).ratio_human(h.TakerGets);if(_.compareTo(l)<=0){var p=o.fields;p.index=o.ledgerIndex,e._offers.splice(a,0,o.fields),r=!0;break}}}}}),this._subs&&(this.emit("transaction",t),r&&this.emit("model",this._offers),i.is_zero()||this.emit("trade",n,i))},u.prototype.offers=function(t){return"function"==typeof t&&(this._sync?t(this._offers):this.once("model",t)),this},u.prototype.offersSync=function(){return this._offers},e.OrderBook=u},17:function(t,e,r){var i=r(23).EventEmitter,n=r(24),s=r(2).Amount;r(25);var o=function(t,e,r,n,s){i.call(this),this.remote=t,this.src_account=e,this.dst_account=r,this.dst_amount=n,this.src_currencies=s};n.inherits(o,i),o.prototype.create=function(){function t(t,r){t||e.notify_update(r)}var e=this,r=this.remote.request_path_find_create(this.src_account,this.dst_account,this.dst_amount,this.src_currencies,t);r.request()},o.prototype.close=function(){this.remote.request_path_find_close().request(),this.emit("end"),this.emit("close")},o.prototype.notify_update=function(t){var e=t.source_account,r=t.destination_account,i=s.from_json(t.destination_amount);this.src_account===e&&this.dst_account===r&&this.dst_amount.equals(i)&&this.emit("update",t)},o.prototype.notify_superceded=function(){this.emit("end"),this.emit("superceded")},e.PathFind=o},18:function(t,e){function r(t,e,r,i,n,s){for(;--s>=0;){var o=e*this[t++]+r[i]+n;n=Math.floor(o/67108864),r[i++]=67108863&o}return n}function i(t,e,r,i,n,s){for(var o=32767&e,a=e>>15;--s>=0;){var c=32767&this[t],u=this[t++]>>15,h=a*c+u*o;c=o*c+((32767&h)<<15)+r[i]+(1073741823&n),n=(c>>>30)+(h>>>15)+a*u+(n>>>30),r[i++]=1073741823&c}return n}function n(t,e,r,i,n,s){for(var o=16383&e,a=e>>14;--s>=0;){var c=16383&this[t],u=this[t++]>>14,h=a*c+u*o;c=o*c+((16383&h)<<14)+r[i]+n,n=(c>>28)+(h>>14)+a*u,r[i++]=268435455&c}return n}function s(t){return or.charAt(t)}function o(t,e){var r=ar[t.charCodeAt(e)];return null==r?-1:r}function a(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function c(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+DV:this.t=0}function u(t){var e=rr();return e.fromInt(t),e}function h(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return this.fromRadix(t,e),void 0;r=2}this.t=0,this.s=0;for(var i=t.length,n=!1,s=0;--i>=0;){var a=8==r?255&t[i]:o(t,i);0>a?"-"==t.charAt(i)&&(n=!0):(n=!1,0==s?this[this.t++]=a:s+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),n&&er.ZERO.subTo(this,this)}function f(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function _(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,i=(1<<e)-1,n=!1,o="",a=this.t,c=this.DB-a*this.DB%e;if(a-->0)for(c<this.DB&&(r=this[a]>>c)>0&&(n=!0,o=s(r));a>=0;)e>c?(r=(this[a]&(1<<c)-1)<<e-c,r|=this[--a]>>(c+=this.DB-e)):(r=this[a]>>(c-=e)&i,0>=c&&(c+=this.DB,--a)),r>0&&(n=!0),n&&(o+=s(r));return n?o:"0"}function l(){var t=rr();return er.ZERO.subTo(this,t),t}function p(){return this.s<0?this.negate():this}function d(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(e=r-t.t,0!=e)return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0}function v(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function m(){return this.t<=0?0:this.DB*(this.t-1)+v(this[this.t-1]^this.s&this.DM)}function y(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s}function g(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s}function b(t,e){var r,i=t%this.DB,n=this.DB-i,s=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<i&this.DM;for(r=this.t-1;r>=0;--r)e[r+o+1]=this[r]>>n|a,a=(this[r]&s)<<i;for(r=o-1;r>=0;--r)e[r]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}function w(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)return e.t=0,void 0;var i=t%this.DB,n=this.DB-i,s=(1<<i)-1;e[0]=this[r]>>i;for(var o=r+1;o<this.t;++o)e[o-r-1]|=(this[o]&s)<<n,e[o-r]=this[o]>>i;i>0&&(e[this.t-r-1]|=(this.s&s)<<n),e.t=this.t-r,e.clamp()}function x(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);n>r;)i+=this[r]-t[r],e[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this[r],e[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t[r],e[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=0>i?-1:0,-1>i?e[r++]=this.DV+i:i>0&&(e[r++]=i),e.t=r,e.clamp()}function E(t,e){var r=this.abs(),i=t.abs(),n=r.t;for(e.t=n+i.t;--n>=0;)e[n]=0;for(n=0;n<i.t;++n)e[n+r.t]=r.am(0,i[n],e,n,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&er.ZERO.subTo(e,e)}function A(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()}function T(t,e,r){var i=t.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t)return null!=e&&e.fromInt(0),null!=r&&this.copyTo(r),void 0;null==r&&(r=rr());var s=rr(),o=this.s,a=t.s,c=this.DB-v(i[i.t-1]);c>0?(i.lShiftTo(c,s),n.lShiftTo(c,r)):(i.copyTo(s),n.copyTo(r));var u=s.t,h=s[u-1];if(0!=h){var f=h*(1<<this.F1)+(u>1?s[u-2]>>this.F2:0),_=this.FV/f,l=(1<<this.F1)/f,p=1<<this.F2,d=r.t,m=d-u,y=null==e?rr():e;for(s.dlShiftTo(m,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),er.ONE.dlShiftTo(u,y),y.subTo(s,s);s.t<u;)s[s.t++]=0;for(;--m>=0;){var g=r[--d]==h?this.DM:Math.floor(r[d]*_+(r[d-1]+p)*l);if((r[d]+=s.am(0,g,r,m,0,u))<g)for(s.dlShiftTo(m,y),r.subTo(y,r);r[d]<--g;)r.subTo(y,r)}null!=e&&(r.drShiftTo(u,e),o!=a&&er.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),0>o&&er.ZERO.subTo(r,r)}}}function j(t){var e=rr();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(er.ZERO)>0&&t.subTo(e,e),e}function S(t){this.m=t}function B(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function k(t){return t}function q(t){t.divRemTo(this.m,null,t)}function R(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function D(t,e){t.squareTo(e),this.reduce(e)}function O(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=15&e*(2-(15&t)*e),e=255&e*(2-(255&t)*e),e=65535&e*(2-(65535&(65535&t)*e)),e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function M(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function I(t){var e=rr();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(er.ZERO)>0&&this.m.subTo(e,e),e}function C(t){var e=rr();return t.copyTo(e),this.reduce(e),e}function L(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],i=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t[r]+=this.m.am(0,i,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function z(t,e){t.squareTo(e),this.reduce(e)}function N(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function P(){return 0==(this.t>0?1&this[0]:this.s)}function F(t,e){if(t>4294967295||1>t)return er.ONE;var r=rr(),i=rr(),n=e.convert(this),s=v(t)-1;for(n.copyTo(r);--s>=0;)if(e.sqrTo(r,i),(t&1<<s)>0)e.mulTo(i,n,r);else{var o=r;r=i,i=o}return e.revert(r)}function U(t,e){var r;return r=256>t||e.isEven()?new S(e):new M(e),this.exp(t,r)}function V(){var t=rr();return this.copyTo(t),t}function G(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function X(){return 0==this.t?this.s:this[0]<<24>>24}function H(){return 0==this.t?this.s:this[0]<<16>>16}function Z(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function K(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function J(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=u(r),n=rr(),s=rr(),o="";for(this.divRemTo(i,n,s);n.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,n.divRemTo(i,n,s);return s.intValue().toString(t)+o}function W(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),n=!1,s=0,a=0,c=0;c<t.length;++c){var u=o(t,c);0>u?"-"==t.charAt(c)&&0==this.signum()&&(n=!0):(a=e*a+u,++s>=r&&(this.dMultiply(i),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),n&&er.ZERO.subTo(this,this)}function Y(t,e,r){if("number"==typeof e)if(2>t)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(er.ONE.shiftLeft(t-1),se,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(er.ONE.shiftLeft(t-1),this);else{var i=new Array,n=7&t;i.length=(t>>3)+1,e.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function Q(){var t=this.t,e=new Array;e[0]=this.s;var r,i=this.DB-t*this.DB%8,n=0;if(t-->0)for(i<this.DB&&(r=this[t]>>i)!=(this.s&this.DM)>>i&&(e[n++]=r|this.s<<this.DB-i);t>=0;)8>i?(r=(this[t]&(1<<i)-1)<<8-i,r|=this[--t]>>(i+=this.DB-8)):(r=255&this[t]>>(i-=8),0>=i&&(i+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==n&&(128&this.s)!=(128&r)&&++n,(n>0||r!=this.s)&&(e[n++]=r);return e}function $(t){return 0==this.compareTo(t)}function te(t){return this.compareTo(t)<0?this:t}function ee(t){return this.compareTo(t)>0?this:t}function re(t,e,r){var i,n,s=Math.min(t.t,this.t);for(i=0;s>i;++i)r[i]=e(this[i],t[i]);if(t.t<this.t){for(n=t.s&this.DM,i=s;i<this.t;++i)r[i]=e(this[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=s;i<t.t;++i)r[i]=e(n,t[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function ie(t,e){return t&e}function ne(t){var e=rr();return this.bitwiseTo(t,ie,e),e}function se(t,e){return t|e}function oe(t){var e=rr();return this.bitwiseTo(t,se,e),e}function ae(t,e){return t^e}function ce(t){var e=rr();return this.bitwiseTo(t,ae,e),e}function ue(t,e){return t&~e}function he(t){var e=rr();return this.bitwiseTo(t,ue,e),e}function fe(){for(var t=rr(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function _e(t){var e=rr();return 0>t?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function le(t){var e=rr();return 0>t?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function pe(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function de(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+pe(this[t]);return this.s<0?this.t*this.DB:-1}function ve(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function me(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=ve(this[r]^e);return t}function ye(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function ge(t,e){var r=er.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function be(t){return this.changeBit(t,se)}function we(t){return this.changeBit(t,ue)}function xe(t){return this.changeBit(t,ae)}function Ee(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);n>r;)i+=this[r]+t[r],e[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this[r],e[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t[r],e[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=0>i?-1:0,i>0?e[r++]=i:-1>i&&(e[r++]=this.DV+i),e.t=r,e.clamp()}function Ae(t){var e=rr();return this.addTo(t,e),e}function Te(t){var e=rr();return this.subTo(t,e),e}function je(t){var e=rr();return this.multiplyTo(t,e),e}function Se(){var t=rr();return this.squareTo(t),t}function Be(t){var e=rr();return this.divRemTo(t,e,null),e}function ke(t){var e=rr();return this.divRemTo(t,null,e),e}function qe(t){var e=rr(),r=rr();return this.divRemTo(t,e,r),new Array(e,r)}function Re(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function De(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Oe(){}function Me(t){return t}function Ie(t,e,r){t.multiplyTo(e,r)}function Ce(t,e){t.squareTo(e)}function Le(t){return this.exp(t,new Oe)}function ze(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r[--i]=0;var n;for(n=r.t-this.t;n>i;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);n>i;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()}function Ne(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r[this.t+i-e]=this.am(e-i,t[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function Pe(t){this.r2=rr(),this.q3=rr(),er.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Fe(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=rr();return t.copyTo(e),this.reduce(e),e}function Ue(t){return t}function Ve(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Ge(t,e){t.squareTo(e),this.reduce(e)}function Xe(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function He(t,e){var r,i,n=t.bitLength(),s=u(1);if(0>=n)return s;r=18>n?1:48>n?3:144>n?4:768>n?5:6,i=8>n?new S(e):e.isEven()?new Pe(e):new M(e);var o=new Array,a=3,c=r-1,h=(1<<r)-1;if(o[1]=i.convert(this),r>1){var f=rr();for(i.sqrTo(o[1],f);h>=a;)o[a]=rr(),i.mulTo(f,o[a-2],o[a]),a+=2}var _,l,p=t.t-1,d=!0,m=rr();for(n=v(t[p])-1;p>=0;){for(n>=c?_=t[p]>>n-c&h:(_=(t[p]&(1<<n+1)-1)<<c-n,p>0&&(_|=t[p-1]>>this.DB+n-c)),a=r;0==(1&_);)_>>=1,--a;if((n-=a)<0&&(n+=this.DB,--p),d)o[_].copyTo(s),d=!1;else{for(;a>1;)i.sqrTo(s,m),i.sqrTo(m,s),a-=2;a>0?i.sqrTo(s,m):(l=s,s=m,m=l),i.mulTo(m,o[_],s)}for(;p>=0&&0==(t[p]&1<<n);)i.sqrTo(s,m),l=s,s=m,m=l,--n<0&&(n=this.DB-1,--p)}return i.revert(s)}function Ze(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),s=r.getLowestSetBit();if(0>s)return e;for(s>n&&(s=n),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function Ke(t){if(0>=t)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this[i])%t;return r}function Je(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return er.ZERO;for(var r=t.clone(),i=this.clone(),n=u(1),s=u(0),o=u(0),a=u(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(n.isEven()&&s.isEven()||(n.addTo(this,n),s.subTo(t,s)),n.rShiftTo(1,n)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(i)>=0?(r.subTo(i,r),e&&n.subTo(o,n),s.subTo(a,s)):(i.subTo(r,i),e&&o.subTo(n,o),a.subTo(s,a))}return 0!=i.compareTo(er.ONE)?er.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a}function We(t){var e,r=this.abs();if(1==r.t&&r[0]<=cr[cr.length-1]){for(e=0;e<cr.length;++e)if(r[0]==cr[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<cr.length;){for(var i=cr[e],n=e+1;n<cr.length&&ur>i;)i*=cr[n++];for(i=r.modInt(i);n>e;)if(0==i%cr[e++])return!1}return r.millerRabin(t)}function Ye(t){var e=this.subtract(er.ONE),r=e.getLowestSetBit();if(0>=r)return!1;var i=e.shiftRight(r);t=t+1>>1,t>cr.length&&(t=cr.length);for(var n=rr(),s=0;t>s;++s){n.fromInt(cr[Math.floor(Math.random()*cr.length)]);var o=n.modPow(i,this);if(0!=o.compareTo(er.ONE)&&0!=o.compareTo(e)){for(var a=1;a++<r&&0!=o.compareTo(e);)if(o=o.modPowInt(2,this),0==o.compareTo(er.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0}var Qe,$e=0xdeadbeefcafe,tr=15715070==(16777215&$e),er=function(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))},rr=function(){return new er(null)};tr&&"undefined"!=typeof navigator&&"Microsoft Internet Explorer"==navigator.appName?(er.prototype.am=i,Qe=30):tr&&"undefined"!=typeof navigator&&"Netscape"!=navigator.appName?(er.prototype.am=r,Qe=26):(er.prototype.am=n,Qe=28),er.prototype.DB=Qe,er.prototype.DM=(1<<Qe)-1,er.prototype.DV=1<<Qe;var ir=52;er.prototype.FV=Math.pow(2,ir),er.prototype.F1=ir-Qe,er.prototype.F2=2*Qe-ir;var nr,sr,or="0123456789abcdefghijklmnopqrstuvwxyz",ar=new Array;for(nr="0".charCodeAt(0),sr=0;9>=sr;++sr)ar[nr++]=sr;for(nr="a".charCodeAt(0),sr=10;36>sr;++sr)ar[nr++]=sr;for(nr="A".charCodeAt(0),sr=10;36>sr;++sr)ar[nr++]=sr;S.prototype.convert=B,S.prototype.revert=k,S.prototype.reduce=q,S.prototype.mulTo=R,S.prototype.sqrTo=D,M.prototype.convert=I,M.prototype.revert=C,M.prototype.reduce=L,M.prototype.mulTo=N,M.prototype.sqrTo=z,Oe.prototype.convert=Me,Oe.prototype.revert=Me,Oe.prototype.mulTo=Ie,Oe.prototype.sqrTo=Ce,Pe.prototype.convert=Fe,Pe.prototype.revert=Ue,Pe.prototype.reduce=Ve,Pe.prototype.mulTo=Xe,Pe.prototype.sqrTo=Ge;var cr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ur=(1<<26)/cr[cr.length-1];er.prototype.chunkSize=Z,er.prototype.toRadix=J,er.prototype.fromRadix=W,er.prototype.fromNumber=Y,er.prototype.bitwiseTo=re,er.prototype.changeBit=ge,er.prototype.addTo=Ee,er.prototype.dMultiply=Re,er.prototype.dAddOffset=De,er.prototype.multiplyLowerTo=ze,er.prototype.multiplyUpperTo=Ne,er.prototype.modInt=Ke,er.prototype.millerRabin=Ye,er.prototype.clone=V,er.prototype.intValue=G,er.prototype.byteValue=X,er.prototype.shortValue=H,er.prototype.signum=K,er.prototype.toByteArray=Q,er.prototype.equals=$,er.prototype.min=te,er.prototype.max=ee,er.prototype.and=ne,er.prototype.or=oe,er.prototype.xor=ce,er.prototype.andNot=he,er.prototype.not=fe,er.prototype.shiftLeft=_e,er.prototype.shiftRight=le,er.prototype.getLowestSetBit=de,er.prototype.bitCount=me,er.prototype.testBit=ye,er.prototype.setBit=be,er.prototype.clearBit=we,er.prototype.flipBit=xe,er.prototype.add=Ae,er.prototype.subtract=Te,er.prototype.multiply=je,er.prototype.divide=Be,er.prototype.remainder=ke,er.prototype.divideAndRemainder=qe,er.prototype.modPow=He,er.prototype.modInverse=Je,er.prototype.pow=Le,er.prototype.gcd=Ze,er.prototype.isProbablePrime=We,er.prototype.square=Se,er.prototype.copyTo=a,er.prototype.fromInt=c,er.prototype.fromString=h,er.prototype.clamp=f,er.prototype.dlShiftTo=y,er.prototype.drShiftTo=g,er.prototype.lShiftTo=b,er.prototype.rShiftTo=w,er.prototype.subTo=x,er.prototype.multiplyTo=E,er.prototype.squareTo=A,er.prototype.divRemTo=T,er.prototype.invDigit=O,er.prototype.isEven=P,er.prototype.exp=F,er.prototype.toString=_,er.prototype.negate=l,er.prototype.abs=p,er.prototype.compareTo=d,er.prototype.bitLength=m,er.prototype.mod=j,er.prototype.modPowInt=U,er.ZERO=u(0),er.ONE=u(1),e.nbi=rr,e.BigInteger=er},19:function(t,e,r){function i(t,e){return[].concat(t,e>>24,255&e>>16,255&e>>8,255&e)}function n(t){return s.bitArray.bitSlice(s.hash.sha512.hash(s.codec.bytes.toBits(t)),0,256)}var s=r(10);r(9);var o=r(18),a=r(25),c=o.BigInteger,u=r(4).Base,h=r(27).UInt,f=(r(21).UInt256,r(28).KeyPair),_=a(function(){this._curve=s.ecc.curves.c256,this._value=0/0},h);_.width=16,_.prototype=a({},h.prototype),_.prototype.constructor=_,_.prototype.parse_json=function(t){return"string"==typeof t?t.length?"s"===t[0]?this._value=u.decode_check(u.VER_FAMILY_SEED,t):32===t.length?this._value=this.parse_hex(t):this.parse_passphrase(t):this._value=0/0:this._value=0/0,this},_.prototype.parse_passphrase=function(t){if("string"!=typeof t)throw new Error("Passphrase must be a string");var e=s.hash.sha512.hash(s.codec.utf8String.toBits(t)),r=s.bitArray.bitSlice(e,0,128);return this.parse_bits(r),this},_.prototype.to_json=function(){if(!(this._value instanceof c))return 0/0;var t=u.encode_check(u.VER_FAMILY_SEED,this.to_bytes());return t},_.prototype.get_key=function(){if(!this.is_valid())throw new Error("Cannot generate keys from invalid seed!");var t,e,r=this._curve,o=0,a=0;do t=s.bn.fromBits(n(i(this.to_bytes(),a))),a++;while(!r.r.greaterEquals(t));e=r.G.mult(t);var c;a=0;do c=s.bn.fromBits(n(i(i(e.toBytesCompressed(),o),a))),a++;while(!r.r.greaterEquals(c));return c=c.add(t).mod(r.r),f.from_bn_secret(c)},e.Seed=_},20:function(t,e,r){function i(t,e,r){var i=m.fromBits(v.toBits(e));r||b.serialize_varint(t,i.length),t.append(i)}function n(t){return u.codec.hex.fromBits(u.codec.bytes.toBits(t))
}function s(t,e,r){if("number"!=typeof e)throw new Error("Integer is not a number");if(0>e||e>=Math.pow(256,r))throw new Error("Integer out of bounds");for(var i=[],n=0;r>n;n++)i.unshift(255&e>>>8*n);t.append(i)}function o(t,e){for(var r=0,i=0;e>i;i++)r+=t.read(1)[0]<<8*(e-1-i);return r}var a=r(25),c=r(9),u=r(10),h=r(2),f=r(29).UInt128,_=r(14).UInt160,l=r(21).UInt256,p=h.Amount,d=h.Currency,v=u.codec.hex,m=u.codec.bytes,y=r(18),g=y.BigInteger,b=function(t){a(this,t)};b.serialize_varint=function(t,e){if(0>e)throw new Error("Variable integers are unsigned.");192>=e?t.append([e]):(e-=193,t.append([193+(e>>>8),255&e]))},b.parse_varint=function(t){var e,r,i=t.read(1)[0];if(192>=i)return i;if(240>=i)return e=t.read(1)[0],193+256*(i-193)+e;if(254>=i)return e=t.read(1)[0],r=t.read(1)[0],12481+65536*(i-241)+256*e+r;throw new Error("Invalid varint length indicator")};var w=e.Int8=new b({serialize:function(t,e){s(t,e,1)},parse:function(t){return o(t,1)}});e.Int16=new b({serialize:function(t,e){s(t,e,2)},parse:function(t){return o(t,2)}}),e.Int32=new b({serialize:function(t,e){s(t,e,4)},parse:function(t){return o(t,4)}}),e.Int64=new b({serialize:function(t,e){var r;if("number"==typeof e){if(e=Math.floor(e),0>e)throw new Error("Negative value for unsigned Int64 is invalid.");r=new g(""+e,10)}else if("string"==typeof e){if(!/^[0-9A-F]{0,16}$/i.test(e))throw new Error("Not a valid hex Int64.");r=new g(e,16)}else{if(!(e instanceof g))throw new Error("Invalid type for Int64");if(e.compareTo(g.ZERO)<0)throw new Error("Negative value for unsigned Int64 is invalid.");r=e}var n=r.toString(16);if(n.length>16)throw new Error("Int64 is too large");for(;n.length<16;)n="0"+n;return i(t,n,!0)},parse:function(t){var e=o(t,4),r=o(t,4),i=new g(e);return i.shiftLeft(32),i.add(r),i}}),e.Hash128=new b({serialize:function(t,e){var r=f.from_json(e);if(!r.is_valid())throw new Error("Invalid Hash128");i(t,r.to_hex(),!0)},parse:function(t){return f.from_bytes(t.read(16))}}),e.Hash256=new b({serialize:function(t,e){var r=l.from_json(e);if(!r.is_valid())throw new Error("Invalid Hash256");i(t,r.to_hex(),!0)},parse:function(t){return l.from_bytes(t.read(32))}}),e.Hash160=new b({serialize:function(t,e){var r=_.from_json(e);if(!r.is_valid())throw new Error("Invalid Hash160");i(t,r.to_hex(),!0)},parse:function(t){return _.from_bytes(t.read(20))}});var x=new b({serialize:function(t,e){var r=e.to_json();if("XRP"===r)i(t,_.HEX_ZERO,!0);else{if("string"!=typeof r||3!==r.length)throw new Error("Tried to serialize invalid/unimplemented currency type.");var n=r.toUpperCase(),s=c.arraySet(20,0);if(!/^[A-Z]{3}$/.test(n)||"XRP"===n)throw new Error("Invalid currency code");s[12]=255&n.charCodeAt(0),s[13]=255&n.charCodeAt(1),s[14]=255&n.charCodeAt(2),t.append(s)}},parse:function(t){var e=d.from_bytes(t.read(20));if(!e.is_valid())throw new Error("Invalid currency");return e}});e.Amount=new b({serialize:function(t,e){var r=p.from_json(e);if(!r.is_valid())throw new Error("Not a valid Amount object.");var i=c.arraySet(8,0);if(r.is_native()){var n=r._value.toString(16);if(n.length>16)throw new Error("Value out of bounds");for(;n.length<16;)n="0"+n;i=m.fromBits(v.toBits(n)),i[0]&=63,r.is_negative()||(i[0]|=64)}else{var s=0,o=0;s|=1<<31,r.is_zero()||(r.is_negative()||(s|=1<<30),s|=(255&97+r._offset)<<22,s|=4194303&r._value.shiftRight(32).intValue(),o=4294967295&r._value.intValue()),i=u.codec.bytes.fromBits([s,o])}if(t.append(i),!r.is_native()){var a=r.currency();x.serialize(t,a),t.append(r.issuer().to_bytes())}},parse:function(t){for(var e=new p,r=t.read(8),i=!(127&r[0]),n=1;8>n;n++)i=i&&!r[n];if(128&r[0]){var s=x.parse(t),o=t.read(20),a=_.from_bytes(o),c=((63&r[0])<<2)+(r[1]>>>6)-97,u=r.slice(1);u[0]&=63;var h=new g(u,256);if(h.equals(g.ZERO)&&!i)throw new Error("Invalid zero representation");e._value=h,e._offset=c,e._currency=s,e._issuer=a,e._is_native=!1}else{var f=r.slice();f[0]&=63,e._value=new g(f,256),e._is_native=!0}return e._is_negative=!(i||64&r[0]),e}}),e.VariableLength=new b({serialize:function(t,e){if("string"!=typeof e)throw new Error("Unknown datatype.");i(t,e)},parse:function(t){var e=this.parse_varint(t);return n(t.read(e))}}),e.Account=new b({serialize:function(t,e){var r=_.from_json(e);i(t,r.to_hex())},parse:function(t){var e=this.parse_varint(t);if(20!==e)throw new Error("Non-standard-length account ID");var r=_.from_bytes(t.read(e));if(!r.is_valid())throw new Error("Invalid Account");return r}}),e.PathSet=new b({typeBoundary:255,typeEnd:0,typeAccount:1,typeCurrency:16,typeIssuer:32,serialize:function(t,e){for(var r=0,i=e.length;i>r;r++){r&&w.serialize(t,this.typeBoundary);for(var n=0,s=e[r].length;s>n;n++){var o=e[r][n],a=0;if(o.account&&(a|=this.typeAccount),o.currency&&(a|=this.typeCurrency),o.issuer&&(a|=this.typeIssuer),w.serialize(t,a),o.account&&t.append(_.from_json(o.account).to_bytes()),o.currency){var c=d.from_json(o.currency);x.serialize(t,c)}o.issuer&&t.append(_.from_json(o.issuer).to_bytes())}}w.serialize(t,this.typeEnd)},parse:function(){throw new Error("Parsing PathSet not implemented")}}),e.Vector256=new b({serialize:function(){throw new Error("Serializing Vector256 not implemented")},parse:function(){throw new Error("Parsing Vector256 not implemented")}}),e.Object=new b({serialize:function(){throw new Error("Serializing Object not implemented")},parse:function(){throw new Error("Parsing Object not implemented")}}),e.Array=new b({serialize:function(){throw new Error("Serializing Array not implemented")},parse:function(){throw new Error("Parsing Array not implemented")}})},21:function(t,e,r){r(10);var i=r(9);r(11);var n=r(18),s=r(25);n.BigInteger,n.nbi;var o=r(27).UInt;r(4).Base;var a=s(function(){this._value=0/0},o);a.width=32,a.prototype=s({},o.prototype),a.prototype.constructor=a;var c=a.HEX_ZERO="0000000000000000000000000000000000000000000000000000000000000000",u=a.HEX_ONE="0000000000000000000000000000000000000000000000000000000000000001";a.STR_ZERO=i.hexToString(c),a.STR_ONE=i.hexToString(u),e.UInt256=a},22:function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},23:function(t,e,r){var i=e.EventEmitter=function(){},n=r(30);r(31);var s=10;i.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._maxListeners=t},i.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||n(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var r=Array.prototype.slice.call(arguments,1);e.apply(this,r)}return!0}if(n(e)){for(var r=Array.prototype.slice.call(arguments,1),i=e.slice(),s=0,o=i.length;o>s;s++)i[s].apply(this,r);return!0}return!1},i.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n(this._events[t])&&!this._events[t].warned){var r;r=void 0!==this._maxListeners?this._maxListeners:s,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(events) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function r(){i.removeListener(t,r),e.apply(this,arguments)}if("function"!=typeof e)throw new Error(".once only takes instances of Function");var i=this;return r.listener=e,i.on(t,r),this},i.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var r=this._events[t];if(n(r)){for(var i=-1,s=0,o=r.length;o>s;s++)if(r[s]===e||r[s].listener&&r[s].listener===e){i=s;break}if(0>i)return this;r.splice(i,1),0==r.length&&delete this._events[t]}else(r===e||r.listener&&r.listener===e)&&delete this._events[t];return this},i.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},i.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),n(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}},24:function(t,e,r){function i(t){if(t instanceof Date)return!0;if("object"!=typeof t)return!1;var e=Date.prototype&&o(Date.prototype),r=t.__proto__&&o(t.__proto__);return JSON.stringify(r)===JSON.stringify(e)}r(23);var n=r(30),s=r(32),o=r(33),a=r(34),c=r(35);e.isArray=n,e.isDate=i,e.isRegExp=c,e.print=function(){},e.puts=function(){},e.debug=function(){},e.inspect=function(t,r,a,u){function h(t,a){if(t&&"function"==typeof t.inspect&&t!==e&&(!t.constructor||t.constructor.prototype!==t))return t.inspect(a);switch(typeof t){case"undefined":return _("undefined","undefined");case"string":var u="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return _(u,"string");case"number":return _(""+t,"number");case"boolean":return _(""+t,"boolean")}if(null===t)return _("null","null");var l=s(t),p=r?o(t):l;if("function"==typeof t&&0===p.length){if(c(t))return _(""+t,"regexp");var d=t.name?": "+t.name:"";return _("[Function"+d+"]","special")}if(i(t)&&0===p.length)return _(t.toUTCString(),"date");var v,m,y;if(n(t)?(m="Array",y=["[","]"]):(m="Object",y=["{","}"]),"function"==typeof t){var g=t.name?": "+t.name:"";v=c(t)?" "+t:" [Function"+g+"]"}else v="";if(i(t)&&(v=" "+t.toUTCString()),0===p.length)return y[0]+v+y[1];if(0>a)return c(t)?_(""+t,"regexp"):_("[Object]","special");f.push(t);var b=p.map(function(e){var r,i;if(t.__lookupGetter__&&(t.__lookupGetter__(e)?i=t.__lookupSetter__(e)?_("[Getter/Setter]","special"):_("[Getter]","special"):t.__lookupSetter__(e)&&(i=_("[Setter]","special"))),l.indexOf(e)<0&&(r="["+e+"]"),i||(f.indexOf(t[e])<0?(i=null===a?h(t[e]):h(t[e],a-1),i.indexOf("\n")>-1&&(i=n(t)?i.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+i.split("\n").map(function(t){return"   "+t}).join("\n"))):i=_("[Circular]","special")),"undefined"==typeof r){if("Array"===m&&e.match(/^\d+$/))return i;r=JSON.stringify(""+e),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=_(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=_(r,"string"))}return r+": "+i});f.pop();var w=0,x=b.reduce(function(t,e){return w++,e.indexOf("\n")>=0&&w++,t+e.length+1},0);return b=x>50?y[0]+(""===v?"":v+"\n ")+" "+b.join(",\n  ")+" "+y[1]:y[0]+v+" "+b.join(", ")+" "+y[1]}var f=[],_=function(t,e){var r={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i={special:"cyan",number:"blue","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[e];return i?"["+r[i][0]+"m"+t+"["+r[i][1]+"m":t};return u||(_=function(t){return t}),h(t,"undefined"==typeof a?2:a)},e.log=function(){},e.pump=null,e.inherits=function(t,e){t.super_=e,t.prototype=a(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})};var u=/%[sdj%]/g;e.format=function(t){if("string"!=typeof t){for(var r=[],i=0;i<arguments.length;i++)r.push(e.inspect(arguments[i]));return r.join(" ")}for(var i=1,n=arguments,s=n.length,o=String(t).replace(u,function(t){if("%%"===t)return"%";if(i>=s)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":return JSON.stringify(n[i++]);default:return t}}),a=n[i];s>i;a=n[++i])o+=null===a||"object"!=typeof a?" "+a:" "+e.inspect(a);return o}},25:function(t){function e(t){if(!t||"[object Object]"!==toString.call(t)||t.nodeType||t.setInterval)return!1;var e=hasOwnProperty.call(t,"constructor"),i=hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!i)return!1;var n;for(n in t);return void 0===n||r.call(t,n)}var r=Object.prototype.hasOwnProperty;t.exports=function i(){var t,r,n,s,o,a,c=arguments[0]||{},u=1,h=arguments.length,f=!1;for("boolean"==typeof c&&(f=c,c=arguments[1]||{},u=2),"object"!=typeof c&&"function"!=typeof c&&(c={});h>u;u++)if(null!=(t=arguments[u]))for(r in t)n=c[r],s=t[r],c!==s&&(f&&s&&(e(s)||(o=Array.isArray(s)))?(o?(o=!1,a=n&&Array.isArray(n)?n:[]):a=n&&e(n)?n:{},c[r]=i(f,a,s)):void 0!==s&&(c[r]=s));return c}},26:function(t){try{t.exports=WebSocket}catch(e){t.exports=MozWebSocket}},27:function(t,e,r){var i=r(10),n=r(9),s=r(11),o=r(18),a=o.BigInteger,c=o.nbi,u=r(4).Base,h=function(){this._value=0/0};h.json_rewrite=function(t,e){return this.from_json(t).to_json(e)},h.from_generic=function(t){return t instanceof this?t.clone():(new this).parse_generic(t)},h.from_hex=function(t){return t instanceof this?t.clone():(new this).parse_hex(t)},h.from_json=function(t){return t instanceof this?t.clone():(new this).parse_json(t)},h.from_bits=function(t){return t instanceof this?t.clone():(new this).parse_bits(t)},h.from_bytes=function(t){return t instanceof this?t.clone():(new this).parse_bytes(t)},h.from_bn=function(t){return t instanceof this?t.clone():(new this).parse_bn(t)},h.is_valid=function(t){return this.from_json(t).is_valid()},h.prototype.clone=function(){return this.copyTo(new this.constructor)},h.prototype.copyTo=function(t){return t._value=this._value,t},h.prototype.equals=function(t){return this._value instanceof a&&t._value instanceof a&&this._value.equals(t._value)},h.prototype.is_valid=function(){return this._value instanceof a},h.prototype.is_zero=function(){return this._value.equals(a.ZERO)},h.prototype.parse_generic=function(t){switch(s.accounts&&t in s.accounts&&(t=s.accounts[t].account),t){case void 0:case"0":case this.constructor.STR_ZERO:case this.constructor.ACCOUNT_ZERO:case this.constructor.HEX_ZERO:this._value=c();break;case"1":case this.constructor.STR_ONE:case this.constructor.ACCOUNT_ONE:case this.constructor.HEX_ONE:this._value=new a([1]);break;default:this._value="string"!=typeof t?0/0:"r"===t[0]?u.decode_check(u.VER_ACCOUNT_ID,t):this.constructor.width===t.length?new a(n.stringToArray(t),256):2*this.constructor.width===t.length?new a(t,16):0/0}return this},h.prototype.parse_hex=function(t){return this._value="string"==typeof t&&t.length===2*this.constructor.width?new a(t,16):0/0,this},h.prototype.parse_bits=function(t){if(i.bitArray.bitLength(t)!==8*this.constructor.width)this._value=0/0;else{var e=i.codec.bytes.fromBits(t);this.parse_bytes(e)}return this},h.prototype.parse_bytes=function(t){return this._value=Array.isArray(t)&&t.length===this.constructor.width?new a(t,256):0/0,this},h.prototype.parse_json=h.prototype.parse_hex,h.prototype.parse_bn=function(t){if(t instanceof i.bn&&t.bitLength()<=8*this.constructor.width){var e=i.codec.bytes.fromBits(t.toBits());this._value=new a(e,256)}else this._value=0/0;return this},h.prototype.to_bytes=function(){if(!(this._value instanceof a))return null;var t=this._value.toByteArray();t=t.map(function(t){return(t+256)%256});var e=this.constructor.width;for(t=t.slice(-e);t.length<e;)t.unshift(0);return t},h.prototype.to_hex=function(){if(!(this._value instanceof a))return null;var t=this.to_bytes();return i.codec.hex.fromBits(i.codec.bytes.toBits(t)).toUpperCase()},h.prototype.to_json=h.prototype.to_hex,h.prototype.to_bits=function(){if(!(this._value instanceof a))return null;var t=this.to_bytes();return i.codec.bytes.toBits(t)},h.prototype.to_bn=function(){if(!(this._value instanceof a))return null;var t=this.to_bits();return i.bn.fromBits(t)},e.UInt=h},28:function(t,e,r){var i=r(10),n=r(21).UInt256,s=function(){this._curve=i.ecc.curves.c256,this._secret=null,this._pubkey=null};s.from_bn_secret=function(t){return t instanceof this?t.clone():(new this).parse_bn_secret(t)},s.prototype.parse_bn_secret=function(t){return this._secret=new i.ecc.ecdsa.secretKey(i.ecc.curves.c256,t),this},s.prototype._pub=function(){var t=this._curve;if(!this._pubkey&&this._secret){var e=this._secret._exponent;this._pubkey=new i.ecc.ecdsa.publicKey(t,t.G.mult(e))}return this._pubkey},s.prototype.to_hex_pub=function(){var t=this._pub();if(!t)return null;var e=t._point,r=e.y.mod(2).equals(0);return i.codec.hex.fromBits(i.bitArray.concat([i.bitArray.partial(8,r?2:3)],e.x.toBits(this._curve.r.bitLength()))).toUpperCase()},s.prototype.sign=function(t){return t=n.from_json(t),this._secret.signDER(t.to_bits(),0)},e.KeyPair=s},29:function(t,e,r){r(10);var i=r(9);r(11);var n=r(18),s=r(25);n.BigInteger,n.nbi;var o=r(27).UInt;r(4).Base;var a=s(function(){this._value=0/0},o);a.width=16,a.prototype=s({},o.prototype),a.prototype.constructor=a;var c=a.HEX_ZERO="00000000000000000000000000000000",u=a.HEX_ONE="00000000000000000000000000000000";a.STR_ZERO=i.hexToString(c),a.STR_ONE=i.hexToString(u),e.UInt128=a},30:function(t){t.exports="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},31:function(t){t.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0;r<t.length;r++)if(e===t[r])return r;return-1}},32:function(t){t.exports=Object.keys||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},33:function(t){t.exports=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.hasOwnProperty.call(t,r)&&e.push(r);return e}},34:function(t){t.exports=Object.create||function(t,e){var r;if(null===t)r={__proto__:null};else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,r=new i,r.__proto__=t}return"undefined"!=typeof e&&Object.defineProperties&&Object.defineProperties(r,e),r}},35:function(t){t.exports=function(t){return t instanceof RegExp||"object"==typeof t&&"[object RegExp]"===Object.prototype.toString.call(t)}}});